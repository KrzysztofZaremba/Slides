<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Class 4a: Simple Linear Regression</title>
    <meta charset="utf-8" />
    <meta name="author" content="Business Forecasting" />
    <script src="libs/header-attrs-2.29/header-attrs.js"></script>
    <link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
    <script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
    <link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding-0.33/datatables.js"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Class 4a: Simple Linear Regression
]
.author[
### Business Forecasting
]

---

&lt;style type="text/css"&gt;
.remark-slide-content {
    font-size: 20px;
}


&lt;/style&gt;







---
## Roadmap


### This set of classes
- What is a simple linear regression?
- How to estimate it?
- How to test hypothesis in the regression?


---

### Motivation

1. Suppose you are a consultant working for Ecobici

--
2. Your boss is worried about the impact of global warming on bike use

--
3. She wants to know: how the bike use will change when the temperature increases by 1 degreee

--
4. This is exactly what the linear regression will tell us!

---
### Simple linear regression

1. Suppose you have paired data: `\(\{(x_1,y_1),(x_2,y_2),...(x_n,y_n)\}\)` 



.pull-left[
<div class="datatables html-widget html-fill-item" id="htmlwidget-b70d329a4ab09ca5eb12" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-b70d329a4ab09ca5eb12">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[["2017-01-02","2017-01-03","2017-01-04","2017-01-05","2017-01-06","2017-01-09","2017-01-10","2017-01-11","2017-01-12","2017-01-13","2017-01-16","2017-01-17","2017-01-18","2017-01-19","2017-01-20","2017-01-23","2017-01-24","2017-01-25","2017-01-26","2017-01-27","2017-01-30","2017-01-31","2017-02-01","2017-02-02","2017-02-03","2017-02-06","2017-02-07","2017-02-08","2017-02-09","2017-02-10","2017-02-13","2017-02-14","2017-02-15","2017-02-16","2017-02-17","2017-02-20","2017-02-21","2017-02-22","2017-02-23","2017-02-24","2017-02-27","2017-02-28","2017-03-01","2017-03-02","2017-03-03","2017-03-06","2017-03-07","2017-03-08","2017-03-09","2017-03-10","2017-03-13","2017-03-14","2017-03-15","2017-03-16","2017-03-17","2017-03-20","2017-03-21","2017-03-22","2017-03-23","2017-03-24","2017-03-27","2017-03-28","2017-03-29","2017-03-30","2017-03-31","2017-04-04","2017-04-05","2017-04-06","2017-04-07","2017-04-10","2017-04-11","2017-04-12","2017-04-13","2017-04-14","2017-04-17","2017-04-18","2017-04-19","2017-04-20","2017-04-21","2017-04-24","2017-04-25","2017-04-26","2017-04-27","2017-04-28","2017-05-01","2017-05-02","2017-05-03","2017-05-04","2017-05-05","2017-05-08","2017-05-09","2017-05-10","2017-05-11","2017-05-12","2017-05-15","2017-05-16","2017-05-17","2017-05-18","2017-05-19","2017-05-22","2017-05-23","2017-05-24","2017-05-25","2017-05-26","2017-05-29","2017-05-30","2017-05-31","2017-06-01","2017-06-02","2017-06-05","2017-06-06","2017-06-07","2017-06-08","2017-06-09","2017-06-12","2017-06-13","2017-06-14","2017-06-15","2017-06-16","2017-06-19","2017-06-20","2017-06-21","2017-06-22","2017-06-23","2017-06-26","2017-06-27","2017-06-28","2017-06-29","2017-06-30","2017-07-03","2017-07-04","2017-07-05","2017-07-06","2017-07-07","2017-07-10","2017-07-11","2017-07-12","2017-07-13","2017-07-14","2017-07-17","2017-07-18","2017-07-19","2017-07-20","2017-07-21","2017-07-24","2017-07-25","2017-07-26","2017-07-27","2017-07-28","2017-07-31","2017-08-01","2017-08-02","2017-08-03","2017-08-04","2017-08-07","2017-08-08","2017-08-09","2017-08-10","2017-08-11","2017-08-14","2017-08-15","2017-08-16","2017-08-17","2017-08-18","2017-08-21","2017-08-22","2017-08-23","2017-08-24","2017-08-25","2017-08-28","2017-08-29","2017-08-30","2017-08-31","2017-09-01","2017-09-04","2017-09-05","2017-09-06","2017-09-07","2017-09-08","2017-09-11","2017-09-12","2017-09-13","2017-09-14","2017-09-15","2017-09-18","2017-09-19","2017-09-20","2017-09-21","2017-09-22","2017-09-25","2017-09-26","2017-09-27","2017-09-28","2017-09-29","2017-10-02","2017-10-03","2017-10-04","2017-10-05","2017-10-06","2017-10-09","2017-10-10","2017-10-11","2017-10-12","2017-10-13","2017-10-16","2017-10-17","2017-10-18","2017-10-19","2017-10-20","2017-10-23","2017-10-24","2017-10-25","2017-10-26","2017-10-27","2017-10-30","2017-10-31","2017-11-01","2017-11-02","2017-11-03","2017-11-06","2017-11-07","2017-11-08","2017-11-09","2017-11-10","2017-11-13","2017-11-14","2017-11-15","2017-11-16","2017-11-17","2017-11-20","2017-11-21","2017-11-22","2017-11-23","2017-11-24","2017-11-27","2017-11-28","2017-11-29","2017-11-30","2017-12-01","2017-12-04","2017-12-05","2017-12-06","2017-12-07","2017-12-08","2017-12-11","2017-12-12","2017-12-13","2017-12-14","2017-12-15","2017-12-18","2017-12-19","2017-12-20","2017-12-21","2017-12-22","2017-12-25","2017-12-26","2017-12-27","2017-12-28","2017-12-29","2018-01-01","2018-01-02","2018-01-03","2018-01-04","2018-01-05","2018-01-08","2018-01-09","2018-01-10","2018-01-11","2018-01-12","2018-01-15","2018-01-16","2018-01-17","2018-01-18","2018-01-19","2018-01-22","2018-01-23","2018-01-24","2018-01-25","2018-01-26","2018-01-29","2018-01-30","2018-01-31","2018-02-01","2018-02-02","2018-02-05","2018-02-06","2018-02-07","2018-02-08","2018-02-09","2018-02-12","2018-02-13","2018-02-14","2018-02-15","2018-02-16","2018-02-19","2018-02-20","2018-02-21","2018-02-22","2018-02-23","2018-02-26","2018-02-27","2018-02-28","2018-03-01","2018-03-02","2018-03-05","2018-03-06","2018-03-07","2018-03-08","2018-03-09","2018-03-12","2018-03-13","2018-03-14","2018-03-15","2018-03-16","2018-03-19","2018-03-20","2018-03-21","2018-03-22","2018-03-23","2018-03-26","2018-03-27","2018-03-28","2018-03-29","2018-03-30","2018-04-02","2018-04-03","2018-04-04","2018-04-05","2018-04-06","2018-04-09","2018-04-10","2018-04-11","2018-04-12","2018-04-13","2018-04-16","2018-04-17","2018-04-18","2018-04-19","2018-04-20","2018-04-23","2018-04-24","2018-04-25","2018-04-26","2018-04-27","2018-04-30","2018-05-01","2018-05-02","2018-05-03","2018-05-04","2018-05-07","2018-05-08","2018-05-09","2018-05-10","2018-05-11","2018-05-14","2018-05-15","2018-05-16","2018-05-17","2018-05-18","2018-05-21","2018-05-22","2018-05-23","2018-05-24","2018-05-25","2018-05-28","2018-05-29","2018-05-30","2018-05-31","2018-06-01","2018-06-04","2018-06-05","2018-06-06","2018-06-07","2018-06-08","2018-06-11","2018-06-12","2018-06-13","2018-06-14","2018-06-15","2018-06-18","2018-06-19","2018-06-20","2018-06-21","2018-06-22","2018-06-25","2018-06-26","2018-06-27","2018-06-28","2018-06-29","2018-07-02","2018-07-03","2018-07-04","2018-07-05","2018-07-06","2018-07-09","2018-07-10","2018-07-11","2018-07-12","2018-07-13","2018-07-16","2018-07-17","2018-07-18","2018-07-19","2018-07-20","2018-07-23","2018-07-24","2018-07-25","2018-07-26","2018-07-27","2018-07-30","2018-07-31","2018-08-01","2018-08-02","2018-08-03","2018-08-06","2018-08-07","2018-08-08","2018-08-09","2018-08-10","2018-08-13","2018-08-14","2018-08-15","2018-08-16","2018-08-17","2018-08-20","2018-08-21","2018-08-22","2018-08-23","2018-08-24","2018-08-27","2018-08-28","2018-08-29","2018-08-30","2018-08-31","2018-09-03","2018-09-04","2018-09-05","2018-09-06","2018-09-07","2018-09-10","2018-09-11","2018-09-12","2018-09-13","2018-09-14","2018-09-17","2018-09-18","2018-09-19","2018-09-20","2018-09-21","2018-09-24","2018-09-25","2018-09-26","2018-09-27","2018-09-28","2018-10-01","2018-10-02","2018-10-03","2018-10-04","2018-10-05","2018-10-08","2018-10-09","2018-10-10","2018-10-11","2018-10-12","2018-10-15","2018-10-16","2018-10-17","2018-10-18","2018-10-19","2018-10-22","2018-10-23","2018-10-24","2018-10-25","2018-10-26","2018-10-29","2018-10-30","2018-10-31","2018-11-01","2018-11-02","2018-11-05","2018-11-06","2018-11-07","2018-11-08","2018-11-09","2018-11-12","2018-11-13","2018-11-14","2018-11-15","2018-11-16","2018-11-19","2018-11-20","2018-11-21","2018-11-22","2018-11-23","2018-11-26","2018-11-27","2018-11-28","2018-11-29","2018-11-30","2018-12-03","2018-12-04","2018-12-05","2018-12-06","2018-12-07","2018-12-10","2018-12-11","2018-12-12","2018-12-13","2018-12-14","2018-12-17","2018-12-18","2018-12-19","2018-12-20","2018-12-21","2018-12-24","2018-12-25","2018-12-26","2018-12-27","2018-12-28","2018-12-31","2019-01-01","2019-01-02","2019-01-03","2019-01-04","2019-01-07","2019-01-08","2019-01-09","2019-01-10","2019-01-11","2019-01-14","2019-01-15","2019-01-16","2019-01-17","2019-01-18","2019-01-21","2019-01-22","2019-01-23","2019-01-24","2019-01-25","2019-01-28","2019-01-29","2019-01-30","2019-01-31","2019-02-01","2019-02-04","2019-02-05","2019-02-06","2019-02-07","2019-02-08","2019-02-11","2019-02-12","2019-02-13","2019-02-14","2019-02-15","2019-02-18","2019-02-19","2019-02-20","2019-02-21","2019-02-22","2019-02-25","2019-02-26","2019-02-27","2019-02-28","2019-03-01","2019-03-04","2019-03-05","2019-03-06","2019-03-07","2019-03-08","2019-03-11","2019-03-12","2019-03-13","2019-03-14","2019-03-15","2019-03-18","2019-03-19","2019-03-20","2019-03-21","2019-03-22","2019-03-25","2019-03-26","2019-03-27","2019-03-28","2019-03-29","2019-04-01","2019-04-02","2019-04-03","2019-04-04","2019-04-05","2019-04-08","2019-04-09","2019-04-10","2019-04-11","2019-04-12","2019-04-15","2019-04-16","2019-04-17","2019-04-18","2019-04-19","2019-04-22","2019-04-23","2019-04-24","2019-04-25","2019-04-26","2019-04-29","2019-04-30","2019-05-01","2019-05-02","2019-05-03","2019-05-06","2019-05-07","2019-05-08","2019-05-09","2019-05-10","2019-05-13","2019-05-14","2019-05-15","2019-05-16","2019-05-17","2019-05-20","2019-05-21","2019-05-22","2019-05-23","2019-05-24","2019-05-27","2019-05-28","2019-05-29","2019-05-30","2019-05-31","2019-06-03","2019-06-04","2019-06-05","2019-06-06","2019-06-07","2019-06-10","2019-06-11","2019-06-12","2019-06-13","2019-06-14","2019-06-17","2019-06-18","2019-06-19","2019-06-20","2019-06-21","2019-06-24","2019-06-25","2019-06-26","2019-06-27","2019-06-28","2019-07-01","2019-07-02","2019-07-03","2019-07-04","2019-07-05","2019-07-08","2019-07-09","2019-07-10","2019-07-11","2019-07-12","2019-07-15","2019-07-16","2019-07-17","2019-07-18","2019-07-19","2019-07-22","2019-07-23","2019-07-24","2019-07-25","2019-07-26","2019-07-29","2019-07-30","2019-07-31","2019-08-01","2019-08-02","2019-08-05","2019-08-06","2019-08-07","2019-08-08","2019-08-09","2019-08-12","2019-08-13","2019-08-14","2019-08-15","2019-08-16","2019-08-19","2019-08-20","2019-08-21","2019-08-22","2019-08-23","2019-08-26","2019-08-27","2019-08-28","2019-08-29","2019-08-30","2019-09-02","2019-09-03","2019-09-04","2019-09-05","2019-09-06","2019-09-09","2019-09-10","2019-09-11","2019-09-12","2019-09-13","2019-09-16","2019-09-17","2019-09-18","2019-09-19","2019-09-20","2019-09-23","2019-09-24","2019-09-25","2019-09-26","2019-09-27","2019-09-30","2019-10-01","2019-10-02","2019-10-03","2019-10-04","2019-10-07","2019-10-08","2019-10-09","2019-10-10","2019-10-11","2019-10-14","2019-10-15","2019-10-16","2019-10-17","2019-10-18","2019-10-21","2019-10-22","2019-10-23","2019-10-24","2019-10-25","2019-10-28","2019-10-29","2019-10-30","2019-10-31","2019-11-01","2019-11-04","2019-11-05","2019-11-06","2019-11-07","2019-11-08","2019-11-11","2019-11-12","2019-11-13","2019-11-14","2019-11-15","2019-11-18","2019-11-19","2019-11-20","2019-11-21","2019-11-22","2019-11-25","2019-11-26","2019-11-27","2019-11-28","2019-11-29","2019-12-02","2019-12-03","2019-12-04","2019-12-05","2019-12-06","2019-12-09","2019-12-10","2019-12-11","2019-12-12","2019-12-13","2019-12-16","2019-12-17","2019-12-18","2019-12-19","2019-12-20","2019-12-23","2019-12-24","2019-12-25","2019-12-26","2019-12-27","2019-12-30","2019-12-31"],[20797,26040,27551,28444,26191,31350,33228,33744,33309,31736,33591,34645,34456,33646,32434,33874,35666,35679,35302,32608,34079,35571,35993,34699,33052,10924,35025,36525,35753,34357,35173,35847,36576,35664,34169,35277,36950,36942,36345,33846,34688,36891,36261,35692,32606,35195,36779,35641,33449,33183,33688,34334,28582,32376,33242,11365,34881,36747,36647,33557,34769,37135,37034,36267,34293,37210,36836,32116,33904,29195,28879,26770,11123,9335,27550,26681,34015,33950,32492,33883,36281,36835,36501,33813,11434,33159,36097,30627,30630,31890,36802,29392,31734,33598,34888,37619,37721,35301,34194,32250,36903,36240,31036,34581,33724,37808,34906,34568,33913,35108,34525,33744,36083,34284,35708,33639,31464,36253,34833,34772,36897,36517,36622,34939,30702,31125,28181,30645,31596,30379,32810,32436,34436,31542,27667,27832,31779,33591,32022,32846,32867,33616,32550,28957,25810,26777,32477,30218,31308,32982,34483,34516,30522,31409,33593,35547,32018,23522,30929,32458,35997,36112,30809,29459,34354,36485,36792,36366,31382,26867,28761,25375,30416,29008,32304,32397,32669,34468,28102,34911,36356,36339,35135,27289,33940,21217,17295,21128,22761,23950,27746,28657,28909,27218,31091,32402,31969,32118,31116,32416,34349,33947,32949,32222,32305,35145,34586,32337,32079,33112,34677,33714,33599,31702,31673,31114,32195,19264,27926,33214,34935,34646,34353,32391,32848,34462,34733,34700,32893,11329,33509,33855,33087,31152,31921,33243,33019,32328,29786,31429,33649,32758,32433,30005,27804,25834,30164,29914,28177,27511,28657,28454,25870,22744,3377,16150,17244,16982,14961,3402,18538,22255,23565,23091,28537,30166,30224,30172,28551,28691,27938,28218,28947,27935,29684,29967,24250,28643,27135,25194,27121,28803,29218,28189,9933,30589,31528,29635,25669,30808,32317,32495,29954,24010,31266,33876,33050,32332,31196,31143,33354,33938,33227,31394,32204,33830,31716,32991,29185,30144,33264,30668,30865,30856,11331,31780,31793,32453,31040,27857,28448,26395,12046,8819,28373,29935,28133,28328,26389,32102,32165,31493,31002,31227,32161,33705,33469,32538,31073,30784,32301,32313,31148,30039,25590,12546,31772,31729,28257,31253,24878,32871,26150,30299,31633,33282,33097,32890,30710,30259,30990,33107,33354,30176,32108,33967,32770,32255,29529,32158,33460,33485,33392,29399,29570,24750,20774,16200,21223,20330,30882,31523,29408,28712,27147,25400,29530,28039,28941,26289,28164,30668,30983,28447,25013,26268,27502,29465,24077,28553,29142,29303,29774,25127,28090,29877,29280,26340,26767,28692,28374,30702,30291,27584,25046,26784,29877,28407,26635,23505,30860,24471,28604,26618,28392,30175,29710,29448,28222,26185,26723,30372,27644,28503,30642,32398,31217,29639,30461,31196,28249,27647,25000,28870,26520,31154,27906,31263,30230,30433,30197,28712,30234,28472,30530,32345,31407,27765,28881,30459,31471,27046,29965,29482,30852,29985,30331,30640,27582,30092,31765,31467,31496,28286,27320,30957,27387,19573,8176,28764,31331,30934,30712,29507,29025,30209,15398,29207,28656,10735,29542,30559,29783,28856,29449,30308,29077,27934,27266,29474,28543,29768,29207,27164,28123,28708,24724,27736,26169,25831,26760,25585,23710,21393,9182,3258,14973,15815,14977,8796,3754,17252,19927,20149,25996,27710,28372,29572,27774,28746,29687,30089,29077,28047,28815,30199,29508,26702,27718,29123,30438,29875,29627,27593,9800,29748,30516,30315,29268,30007,30948,27016,30638,29950,30746,32356,31943,31487,30348,28366,32623,32420,32139,29889,26394,28921,31622,31490,31530,31588,31098,32427,32199,29926,10388,30192,32133,31029,29687,30774,32346,32576,31992,30392,31542,33571,32716,31022,30425,29940,32129,32545,32220,30409,26882,27199,24950,10941,8446,26482,30126,30168,29736,21801,28906,30306,12121,29602,28499,30472,32105,31813,30842,23844,30011,30268,26757,23509,24287,29722,29757,31080,30674,28157,30381,32255,31994,31743,28611,31478,30536,26887,23783,24479,30308,32536,32446,27449,28716,30092,29680,31943,29387,28869,23363,29280,29677,29147,28094,27540,27508,30354,27725,28884,22559,30390,26654,27501,25231,27899,29159,29798,23946,25177,28012,26020,28377,18169,19847,27295,29622,28364,29370,27295,24023,28879,26972,30270,26657,27702,30279,30118,30218,29198,29267,31164,30737,27990,27442,29784,31587,32061,30887,29375,30913,31654,31061,30485,29321,29891,26991,29363,30047,26250,6549,26714,26238,25379,25841,30155,25461,25232,30404,29399,26871,27790,29985,29816,28077,30681,30185,28379,30870,26932,29828,32140,28739,18562,28089,27797,29863,30251,25208,25864,26772,30402,24836,27383,23147,28862,26752,30503,30308,29218,28337,30553,29852,29445,27679,9834,28800,30622,29984,28518,29245,30497,30825,29858,28711,28302,30096,29805,29546,27666,28346,30453,28883,24522,26383,26817,27383,24767,24632,23004,17405,10507,3475,14915,15194,14671,9760],[14.49,15.22,16.89,15.99,17.85,10.91,12.85,14.29,15.21,13.39,14.43,14.55,15.61,15.65,16,15.98,15.34,16.39,16.71,16.98,12.79,14.73,17.19,14.87,14.37,16.2,17.04,17.39,16.64,14.9,16.61,16.56,16.33,15.76,15.81,17.39,15.42,16.51,17.82,16.93,18.48,19.31,19.19,16.3,15.18,16.61,17.71,15.21,14.78,15,14.65,13.72,12.74,13.77,15.57,16.48,17.47,17.85,17.86,18.67,17.62,19.63,19.43,19.92,19.09,24.77,20.06,18.2,19.89,20.22,18.85,17.32,16.7,17.25,16.31,13.87,14.73,16.52,18.18,18.04,19.36,24.13,20.7,22.68,21.53,20.5,20.38,17.81,16.73,18.48,18.35,19.16,19.34,18.53,20.68,22.09,22.18,22.42,21.89,21.63,23.17,20.84,18.72,20.97,18.75,17.81,17.04,17.36,18.65,19.89,19.33,18.56,18.91,19.04,18.95,18.88,17.99,18.79,19.7,19.16,17.7,18.09,20.13,21.09,16.73,17.2,16.72,17.49,17.19,16.76,16.13,15.95,16.32,16.14,15.92,15.47,16.21,17.8,18.31,17.34,16.57,17.07,16.93,16.57,15.61,15.83,17.04,17.16,17.7,18.91,18.45,18.92,18.93,18.57,19.5,19,16.32,15.58,17.51,18.2,18.27,18.49,19.63,17.81,18.01,18.32,19.03,18.41,17.37,16.78,16.22,15.77,16.41,16.86,16.42,16.82,15.89,15.66,16.03,15.5,16.49,17.34,18.98,19.4,18.75,19.5,19.17,18.79,18.98,17.88,18.88,17.52,17.23,16.11,16.95,16.56,17.51,17.77,17.27,18.76,18.52,16.34,15.34,16.19,15.62,15.74,16.41,17.47,18.41,15.91,14.93,12.33,14.21,16.04,16.65,17.58,17.72,19.43,18.42,17.08,17.13,17.41,15.61,15.23,14.86,15.02,14.93,14.64,15.26,13.98,15.19,13.34,11.58,16.12,11.87,13.54,13.91,12.93,11.93,15.28,15.7,15.34,15.34,15.19,10.01,12.1,12.11,14.1,14.97,15.42,15.26,15.82,15.79,15.49,13.43,14.29,14.34,12.99,13.09,12.41,12.37,13.87,12.96,15.17,13.62,12.43,14.38,15.22,12.9,10.37,11.32,10.79,11.05,12.5,15.77,14.34,12.79,11.61,13.1,9.42,7.64,11.53,12.01,18.63,16.93,16.96,16.22,14.14,13.13,15.73,14.84,15.67,15.94,16.54,16.28,16.6,16.98,16.39,16.54,17.81,18.19,18.66,18.98,17.29,15.46,18.17,15.55,11.18,20.58,17.73,18.59,17.13,17.3,17.88,18.97,18.86,18.81,17.79,17.64,19.6,19.83,19.25,17.98,15.97,19.53,20.21,18.9,17.86,16.73,19.95,16.52,14.45,13.5,19.33,18.98,19.31,20.38,19.43,18.69,18.51,18.4,17.7,18.11,18.76,17.9,18.01,17.79,18.49,18.3,16.1,14.62,17.08,17,17.9,20.54,20.06,20.09,20.45,21.05,18.19,18.93,19.51,20.12,19.25,20.79,22.57,23.31,22.52,20.67,20,20.13,21.25,20.95,19.52,19.05,17.24,16.6,15.59,16.33,15.37,16.68,17.52,17.27,17.73,17.25,16.74,17.67,16.97,15.39,20.63,17.38,17.33,17.54,15.93,16.36,15.84,15.35,16.1,16.35,16.65,16.56,17.46,18.72,17.46,20.11,20.03,19.66,18.33,17.13,18.54,17.53,18.2,17.29,16.48,16.13,16.23,17.08,16.45,16.52,16.11,17,16.67,16.97,16.43,17.18,16.45,17.1,17.18,24.46,16.73,15.76,16.02,16.99,16.93,20.39,18.12,17.27,16.29,17.43,18.14,17.59,17.93,16.88,17.87,17.07,16.31,17.54,18.32,19,17.67,17.78,17.5,17.2,17.12,17.87,16.76,16.95,16.65,16.67,16.72,17.53,16.9,17.22,17.48,17.63,17.11,15.52,15.86,15.88,16.61,16.36,16.7,18.39,17.56,16,16.48,16.52,15.91,14.28,16.42,17.59,18.71,18.75,18.41,17.09,15.04,6.97,11.82,12.88,15.11,15.95,15.76,17.01,17.24,15.73,15.89,15.53,14.77,16.12,16.58,15.21,13.83,14.78,16.94,14.82,13.05,13.97,15.18,14.6,13.63,14.78,15.64,11.89,11.51,12.26,13.03,12.96,14.1,13.87,14.45,13.95,12.78,13.36,14.25,15.38,13.62,11.81,13.2,14.7,12.9,12.87,14.32,14.29,14.87,15.27,15.11,15.94,16.1,16.54,14.08,14.34,14.67,14.76,14.56,17.07,17.18,17.72,17.8,14.86,16.33,15.52,13.25,16.35,18.18,19.32,18.72,18,17.74,18.03,15.17,17.25,18.86,18.6,15.19,18.5,17.78,17.28,18.72,19.58,20.93,19.58,19.48,19.72,18.06,16.66,15.91,16.34,15.01,15.73,18.47,16.94,16.15,16.79,18.26,19.03,19.15,18.8,18.27,18.57,16.75,16.56,17.86,19.5,19.06,18.56,20.16,20.72,21.86,16.54,19.48,20.52,20,19.68,17.82,17.95,17.56,13.34,22.76,19.04,19.13,20.74,21.06,21.12,21.29,20.53,20.53,21.43,17.87,16.97,21.12,20.93,20.42,20.77,18.87,19.46,20.28,20.71,20.96,19.67,17.21,16.95,17.17,16.55,16.45,18.34,17.04,17.77,16.39,17.05,20.47,19.02,17.76,18.84,19.82,16.67,16.59,17.33,17.61,16.64,16.35,16.35,16.43,17.63,18.54,16.75,17.37,17.99,17.3,16.27,18.48,18.43,16.64,16.64,16.53,17.51,16.53,15.63,15.22,15.38,16.65,16.48,17.14,17.96,17.92,17.39,16.46,16.21,17.88,18.04,18.3,18.54,18.77,18.41,19.82,17.98,17.12,16.82,17.44,17.32,18.19,18.35,19.25,18.22,18.3,18,17.65,17.67,18.19,18.15,17.5,16.89,17.25,16.85,16.25,17.23,17.82,17.59,17.01,17.27,17.99,17.86,17.77,18.28,19.02,16.31,17.1,17.83,16.99,16.77,17.27,15.67,18.04,19.09,19.23,19.24,18.32,16.55,15.1,18.31,18.21,16.81,16.25,15.69,16.05,16.9,17.88,17.53,15.59,15.25,16.46,15.57,15.88,17.1,16.38,17.9,16.08,15.19,16.44,14.99,15.65,16.46,17.23,17.65,17.66,17.64,17.2,18.51,17.89,17.85,15.29,16.34,15.81,15.39,15.61,15.72,15.79,13.56,14.9,16.05,15.09,14.74,10.76,11.88,12.83,13.47,14.35,14.64,14.68,14.54,16.89,15.58],[23.03,31.5,26.61,35.02,47.21,42.24,29.42,30.82,30.19,25.67,28.67,28.16,30.97,23.14,13.49,28.06,25.32,25.99,37.66,31.72,37.97,40.34,33.51,29.61,25.12,25.75,33.19,26.64,14.2,32.66,30.59,29.39,18.38,15.25,12.71,9.289999999999999,28.98,22.51,22.81,21.2,28.67,32.83,33.99,29.04,17.73,25.25,23.18,27.08,25.51,33.13,23.24,16.02,21.39,23.92,21.55,18.2,16.44,16.42,24.68,37.78,19.83,19.35,17.05,22.62,27.04,22.29,44.6,36.97,31.41,33.81,28.79,16.5,18.58,20.19,21.73,24.25,24.07,21.97,25.57,31.28,37.02,25.63,40.01,31.27,45.02,40.44,44.88,39.59,34.18,36.11,42.07,41.01,31.38,28.38,36.85,38.44,41.79,41.2,36.54,40.26,36.84,39.85,27.31,25.29,23.16,10.55,13.75,13.88,14.4,26.48,25.12,27.11,33.55,24.13,21.56,23.69,9.279999999999999,12.9,15.74,9.75,10.43,14.15,20.96,18,11.52,24.41,18.69,24.38,17.27,15.22,17.92,18.13,15.75,10.11,19.43,22.05,26.93,28.49,20.19,22.43,23.45,21.84,17.15,18.14,22.64,23.01,13.09,24.21,19.64,12.49,17.25,17.14,18.52,19.61,19.55,16.45,13.95,5.93,17.52,12.71,25.74,13.15,11.84,21.09,12.06,12.42,15.24,11.04,20.51,15.34,10.75,15.32,20.56,17.01,12.73,13.1,13.79,7.92,14.97,14.73,23.58,24.59,23.4,20.22,13.76,17.17,21.94,19.56,12.34,17.09,26.67,19.69,8.449999999999999,8.119999999999999,6.96,8.15,7.02,7.41,9.41,18.6,13.46,8.9,8.18,9.16,6.78,8.83,21.65,23.59,22.8,9.09,9.949999999999999,9.66,28.48,28.2,28.8,30.62,34.7,28.58,13.7,22.96,16.11,18.93,35.47,26.03,7.49,8.23,22.28,17.19,29.13,27.9,24.79,20.14,23.63,39.11,20.03,33.77,29.34,29.4,38.67,39.23,38.21,32.9,25.28,12.47,36.25,31.63,35.78,55.14,27.45,28.68,30.44,32.06,34.32,30.25,42.3,27.85,28.06,26.8,34.85,49.97,24.87,35.84,43.8,43.33,34.54,27.62,40.08,45.16,26.68,29.06,34.63,25.91,33.12,35.85,22.4,37.05,29.24,22.47,30.94,6.38,14.88,21.31,18.81,19.28,20.48,29.31,27.67,17.05,18.58,22.35,35.07,21.36,23.68,24.35,22.2,20.81,28.09,31.26,33.95,23.61,30.35,30.8,32.01,32.91,28.66,30.59,33.75,19.19,27.66,20.77,24.99,31.02,27.81,28.34,23.68,29.01,33.61,22.24,22.56,29.47,29.13,24.12,24.15,22.33,21.6,23.26,28.46,27.7,31.2,26.47,27.69,16.93,24.28,20.78,28.63,24.1,23.19,21.97,22.57,25.81,29.82,26.97,38.88,31.47,26.5,17.64,18.93,24.02,32.08,16.74,22.96,23.2,21.92,23.98,29.11,23.83,18.01,20.46,19.73,29.13,30.47,28.48,21.16,23.96,20.98,21.56,21.29,17.49,24.58,9.130000000000001,22.98,29.01,28.82,21.79,19.57,28,13.22,18.79,25.64,9.68,9.66,11.09,16.26,8.81,18.9,22.85,20.17,14.98,24.09,28.42,21.57,29.51,17.76,13.12,21.72,14.87,20.95,19.6,23.57,34.62,22.66,20.34,19.95,17.48,20.06,18.88,17.17,20.63,23.21,17.79,19.12,10.79,10.37,10.32,10.57,18.55,19.78,20.85,20.22,20.21,23.35,21.88,23.51,20.41,15.32,12.37,12.75,17.4,17.8,17.26,11.74,20.01,16.53,18.2,26.74,22.91,15.5,13.43,23.17,24.55,22.7,26.48,19.08,18.07,21.36,29.03,26.38,18.89,16.02,18.23,17.35,18.53,17.51,14.92,10.86,9.48,8.27,9.630000000000001,13.6,24.7,18.21,23.89,27.62,19.24,12.13,17.22,9.119999999999999,6.64,10.13,7.45,18.62,18.91,25.92,26.2,11.63,19.46,20.64,23,18.63,13.9,24.11,24.63,18.95,19.2,19.81,24.72,23.91,21.54,24.62,27.75,29.41,34.65,33,37.69,34.08,28.2,14.41,6.3,7.42,23.19,36.42,24.95,23.12,17.64,36.63,53.51,45.23,17.78,22.18,40.53,49.53,15.89,17.97,29.71,36.8,84.37,28.73,15.55,18.79,17.58,67.20999999999999,36.15,26.75,30.86,25.98,23.53,26.36,23.01,24.7,22.13,29.65,31.96,31.39,24.5,27.21,21.28,17.72,21.34,19.38,19.42,24.82,15.08,16.63,19.95,25.48,28.53,33.23,30.53,20.04,24.23,27.66,30.84,26.9,22.69,17.95,11.73,12.54,10.55,12.67,21.71,17.24,15.05,18.77,28.31,18.62,20.42,22.34,24.03,23.03,26.9,24.44,22.42,27.6,29.72,20.22,20.43,21.3,23.98,18.28,14.79,11.45,16.67,19.34,28.77,27.59,27.47,25.82,30.07,29.81,31.62,19.75,25.9,26.47,22.72,40.64,36.79,32.98,22.15,20.31,30.44,34.12,36.97,38.05,36.47,40.9,29.42,18.45,20.29,27.37,39.03,33.45,28.12,34.19,36.2,77.34,64.70999999999999,67.08,65.22,36.05,32.39,33.33,24.57,30.31,31.03,22.67,30.23,30.67,29.17,23.13,11.16,12.64,12.24,15.68,19.17,16.98,10.46,20.19,12.17,11.61,23.69,17.72,22.11,28.61,27.8,11.19,14.18,18.88,12.15,12.57,13.89,15.69,13.28,23.73,23.5,19.88,24.46,20.57,22.95,22.45,20.56,17.31,15.63,21.24,16.57,14.78,16.36,17.07,19.71,16.44,14.42,17.42,23.79,15.82,18.05,15.11,15.59,12.07,12.22,24.89,10.01,13.92,14.11,15.52,16.48,12.5,11.85,12.62,16.4,24.7,19.74,20.66,20.85,19.29,16.37,13.84,14.4,18.23,20.07,22.38,16.74,19.9,15.27,12.79,9.460000000000001,23.55,21.24,10.32,18.51,24.04,18.93,24.11,29.06,27.85,15.1,7.24,12.13,11.64,11.63,14.45,9.800000000000001,7.1,9.130000000000001,18.54,16.27,16.66,20.41,14.04,10.97,9.18,8.17,14.86,15.33,17.76,22.57,32.69,20.93,26.71,13.64,21.22,24.6,20.38,15.31,16.21,12.78,18.91,13.87,10.05,10,19.92,15.34,29.04,26.32,30.44,24.71,26.71,24.13,26.81,21.08,26.55,23.81,21.11,20.97,23.68,17.71,25.94,24.89,31.38,24.54,18.67,18.61,25.28,35.55,38.1,37.52,38.09,19.77,43.71,21.97,31.62,10.88,15.35]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>fecha_retiro<\/th>\n      <th>Trips<\/th>\n      <th>TMP<\/th>\n      <th>PM2.5<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":7,"searching":false,"initComplete":"function(settings, json) {\n$(this.api().table().container()).css({'font-size': '12px'});\n}","columnDefs":[{"className":"dt-right","targets":[1,2,3]},{"name":"fecha_retiro","targets":0},{"name":"Trips","targets":1},{"name":"TMP","targets":2},{"name":"PM2.5","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[7,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":["options.initComplete"],"jsHooks":[]}</script>
]
.pull-right[
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-2-1.png" width="80%" /&gt;
]


---
### Simple linear regression

2. In the population, there exists a linear relationship between `\(x_i\)` and `\(y_i\)` of the form:

`$$y_i=\beta_0+\beta_1x_i+u_i$$`
Where:
  - `\(y_i\)` is a dependent variable  
  - `\(x_i\)` is a independent variable, or regressor, or predictor 
      - (suppose non-random)
  - `\(\beta_0\)` and `\(\beta_1\)` are parameters
  - `\(\beta_1\)` tells you how `\(y_i\)` changes (on average) when we change `\(x_i\)` by one unit
  - `\(\beta_0\)` is intercept, where the line cuts y axis
  - `\(u_i\)` is a random error term (unknown)

---

&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-3-1.png" width="100%" /&gt;

---


&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-4-1.png" width="100%" /&gt;

---

### Returns to Education  
 Card (Angrist and Krueger, 1991) 

**Context:**  How additional years of schooling affect workers’ earnings in the labor market?

**Finding:** Each additional year of schooling increases wages by ~6–10%.  

**Question:** “Suppose we see an estimated effect of $100 increase in monthly wages with each additional year of education. What’s the regression equation behind this? What is Y, what is X, and what does β₁ mean in plain business terms?”

---

### Forecasting Demand  
Dinerstein et al (AER, 2018)

**Context:** How sensitive online consumer demand is to small price change?

**Finding:** Small price changes generate large changes in the demand in online shopping (eBay). 

**Question:** “Suppose that if we increase a price of a keyboard by $1, the demand decreases on average by 200 units. Which variable is Y? Which is X? 

---

### Real Estate &amp; Amenities  
Glaeser &amp; Kahn (Journal of Transport Geography, 2019) 

**Context:** How proximity to amenities such as schools or subway stations influences housing prices?

**Finding:** Properties prices increase significantly near subways.  

**Question:** “Suppose you’re told: each kilometer closer to a subway increases house price by $1205. What regression line must be behind that claim? What is Y, what is X, and what does β₁ mean?”

---
### Advertising
Alpert et al. (Journal of Public Economics, 2023)

**Context:** Does advertising for medication actually increase doctor visits and prescriptions?

**Finding:** A 10% increase in views of ads for medication increased  prescriptions by ~1.7%.  

**Question:** “Suppose we see a finding: one more million views of ads increases monthly  medication sales by 500. What regression did they run? What’s Y? What’s X? How would we interpret β₁?”

---

### Gifts to Physicians  
Newham &amp; Valente (Journal of Health Economics, 2024), 

**Context:** How payments from pharmaceutical companies to doctors affect prescription drug cost?

**Finding:** Each dollar of gift/payment to doctors leads to approximately $23 in increased prescription drug costs.  

**Question:** “Here, β₁ from regression indicates that every \$1 in gifts yields an extra \$23 in drug costs. What model structure would get you this? Who might be Y, who is X, and what does β₁ mean for policy?”


---
### Assumptions

We can estimate `\(\beta\)` under some assumptions.

`$$y_i=\beta_0+\beta_1x_i+u_i$$`

Here they are:
0. Model is linear in the parameter and with additive error term
1. `\(E(u_i)=0\rightarrow E(y_i|x=x_0)=\beta_0+\beta_1x_0\)`
2. `\(Var(u_i)=\sigma^2\rightarrow var(y_i|x=x_0)=\sigma^2\)`
3. `\(cov(u_i,u_j)=0\)`



---
### General Example


&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-5-1.png" width="100%" /&gt;



---

### Model is linear in the parameter and with additive error term

- Linear models
  - `\(y_i=\beta_0+\beta_1x_i+e_i\)`
  - `\(y_i=\beta_0+\beta_1x^2_i+e_i\)`
  - `\(y_i=\beta_0+\beta_1log(x)_i+e_i\)`
  - `\(y_i=\beta_0+\beta_1c^{x_i}+e_i\)`

- Not linear models
  - `\(y_i=(\beta_0+\beta_1x_i)*e_i\)`
  - `\(y_i=\beta_0+x^{\beta_1}_i+e_i\)`
  - `\(y_i=log(\beta_0+\beta_1x_i+e_i)\)`
  - `\(y_i=\beta_0+(\beta_1x_i+e_i)^2\)`

---

2 is in the app


---
### `\(Var(u_i)=\sigma^2\)`

What happens if this is not true?
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-6-1.png" width="100%" /&gt;



---
Let's go back to our regression line
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-7-1.png" width="100%" /&gt;
---
### Estimation of the parameters


We want to estimate the parameters in this linear relationship based on our **sample**. 

- Once estimated, we can write `\(y_i\)` as

`$$y_i=\hat{\beta}_0+\hat{\beta}_1x_i+e_i$$`

--

- Residua term (e) here reflects both uncertainly about parameters and the random part present in population model

--

- We can predict `\(y_i\)` for any `\(x_i\)` using our estimates

`$$\hat{y_i}=\hat{\beta}_0+\hat{\beta}_1x_i$$`


---
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-8-1.png" width="100%" /&gt;


---

&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-9-1.png" width="100%" /&gt;

---
 
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-10-1.png" width="100%" /&gt;


--

- How do we find `\(\hat{\beta}_0\)` and `\(\hat{\beta}_1\)`?

---

### Best fit line

The best fitting line will minimize the sum of squared residuals `\(SSE=\sum^n_{i=1}e_i^2\)`

`$$(\hat{\beta_0},\hat{\beta_1})=argmin_{b_0,b_1} SSE=argmin_{b_0,b_1}\sum^n_{i=1}e_i^2$$`
--
`$$\begin{align*}
SSE &amp;= \sum_{i=1}^{n} e_i^2 \\
&amp;= \sum_{i=1}^{n} (y_i - \hat{y}_i)^2 \\
&amp;= \sum_{i=1}^{n} \left( y_i - (b_0 + b_1 x_i) \right)^2
\end{align*}$$`

--
So effectively we are minimizing: 

`$$(\hat{\beta_0},\hat{\beta_1})=argmin_{b_0,b_1} SSE=argmin_{b_0,b_1}\sum^n_i\left( y_i - (b_0 + b_1 x_i) \right)^2$$`

---

### OLS 

We called this estimator **OLS** - .blue[ordinary least squares]

`$$(\hat{\beta_0},\hat{\beta_1})=argmin_{b_0,b_1} SSE=argmin_{b_0,b_1}\sum^n_i\left( y_i - (b_0 + b_1 x_i) \right)^2$$`
---
### ✏️ Sidenote on Derivatives
To solve OLS, we’ll need **derivatives**. A key tool is the **chain rule**: if  

`$$h(x) = f(g(x)),$$`  

then  

`$$h'(x) = f'(g(x)) \cdot g'(x).$$`  

**Example (square function):**  


`$$h(x) = (3x+1)^2 = f(g(x)),$$` 

Then

- `\(f(u) = u^2 \quad \Rightarrow \quad f'(u) = 2u\)`
- `\(g(x) = 3x+1 \quad \Rightarrow \quad g'(x) = 3\)`  

and  

`$$h'(x) = f'(g(x)) \cdot g'(x) = 2(3x+1)\cdot 3.$$`  

---
### Best fit line 1

To find the minimum of SSE, we take partial derivatives with respect to `\(\beta_0\)` and `\(\beta_1\)` and set them equal to zero:

Partial derivative with respect to `\(\beta_0\)`:

`$$\frac{\partial SSE}{\partial \hat{\beta}_0} = -2\sum_{i=1}^{n} \left( y_i - (\hat{\beta}_0 + \hat{\beta}_1 x_i) \right)$$`

Setting this derivative to zero:

`$$-2\sum_{i=1}^{n} \left( y_i - (\hat{\beta}_0 + \hat{\beta}_1 x_i) \right) = 0$$`
`$$\hat{\beta}_0n+\hat{\beta}_1\sum x_i=\sum y_i$$`

---

### Best fit line 2

Partial derivative with respect to `\(\hat{\beta}_1\)`:

`$$\frac{\partial SSE}{\partial \hat{\beta}_1} = 2\sum_{i=1}^{n} x_i\left( y_i - (\hat{\beta}_0 + \hat{\beta}_1 x_i) \right)$$`

Setting this derivative to zero:

`$$2\sum_{i=1}^{n} x_i\left( y_i - (\hat{\beta}_0 + \hat{\beta}_1 x_i) \right) = 0$$`
`$$\hat{\beta}_0\sum x_i+\hat{\beta}_1\sum x^2_i=\sum x_iy_i$$`
---

### Best fit line 

Putting it all together:

`$$\small \hat{\beta}_0n+\hat{\beta}_1\sum x_i=\sum y_i$$`

`$$\small \hat{\beta}_0=\frac{\sum y_i-\hat{\beta}_1\sum x}{n}=\bar{y}-\hat{\beta_1}\bar{x}$$`

--
And plugging this here:


`$$\small \hat{\beta}_0\sum x_i+\hat{\beta}_1\sum x^2_i=\sum x_iy_i$$`

We get: 
`$$\small \hat{\beta}_1=\frac{\sum x_iy_i-\frac{\sum x_i\sum y_i}{n}}{\sum x_i^2-\frac{(\sum x_i)^2}{n}}=\frac{\sum(x_i-\bar{x})(y_i-\bar{y})}{\sum(x_i-\bar{x})^2}=\frac{\widehat{cov(x_i,y_i)}}{\widehat{var(x_i)}}$$`
Or
`$$\small \hat{\beta}_1=\frac{\widehat{cov(x_i,y_i)}}{\widehat{var(x_i)}}=\frac{\widehat{cov(x_i,y_i)}}{\sqrt{\widehat{var(x_i)}}\sqrt{\widehat{var(x_i)}}}\frac{\sqrt{\widehat{var(y_i)}}}{\sqrt{\widehat{var(y_i)}}}=\widehat{\rho(x,y)}\frac{\sqrt{\widehat{var(y_i)}}}{\sqrt{\widehat{var(x_i)}}}$$`

---

&lt;iframe src="https://observablehq.com/@yizhe-ang/interactive-visualization-of-linear-regression" width="100%" height="450px" data-external="1"&gt;&lt;/iframe&gt;
Source: [https://observablehq.com/@yizhe-ang/interactive-visualization-of-linear-regression)




---
### Back to Motivating example


.pull-left[
<div class="datatables html-widget html-fill-item" id="htmlwidget-14300544f0d7fd8fc86a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-14300544f0d7fd8fc86a">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[["2017-01-02","2017-01-03","2017-01-04","2017-01-05","2017-01-06","2017-01-09","2017-01-10","2017-01-11","2017-01-12","2017-01-13","2017-01-16","2017-01-17","2017-01-18","2017-01-19","2017-01-20","2017-01-23","2017-01-24","2017-01-25","2017-01-26","2017-01-27","2017-01-30","2017-01-31","2017-02-01","2017-02-02","2017-02-03","2017-02-06","2017-02-07","2017-02-08","2017-02-09","2017-02-10","2017-02-13","2017-02-14","2017-02-15","2017-02-16","2017-02-17","2017-02-20","2017-02-21","2017-02-22","2017-02-23","2017-02-24","2017-02-27","2017-02-28","2017-03-01","2017-03-02","2017-03-03","2017-03-06","2017-03-07","2017-03-08","2017-03-09","2017-03-10","2017-03-13","2017-03-14","2017-03-15","2017-03-16","2017-03-17","2017-03-20","2017-03-21","2017-03-22","2017-03-23","2017-03-24","2017-03-27","2017-03-28","2017-03-29","2017-03-30","2017-03-31","2017-04-04","2017-04-05","2017-04-06","2017-04-07","2017-04-10","2017-04-11","2017-04-12","2017-04-13","2017-04-14","2017-04-17","2017-04-18","2017-04-19","2017-04-20","2017-04-21","2017-04-24","2017-04-25","2017-04-26","2017-04-27","2017-04-28","2017-05-01","2017-05-02","2017-05-03","2017-05-04","2017-05-05","2017-05-08","2017-05-09","2017-05-10","2017-05-11","2017-05-12","2017-05-15","2017-05-16","2017-05-17","2017-05-18","2017-05-19","2017-05-22","2017-05-23","2017-05-24","2017-05-25","2017-05-26","2017-05-29","2017-05-30","2017-05-31","2017-06-01","2017-06-02","2017-06-05","2017-06-06","2017-06-07","2017-06-08","2017-06-09","2017-06-12","2017-06-13","2017-06-14","2017-06-15","2017-06-16","2017-06-19","2017-06-20","2017-06-21","2017-06-22","2017-06-23","2017-06-26","2017-06-27","2017-06-28","2017-06-29","2017-06-30","2017-07-03","2017-07-04","2017-07-05","2017-07-06","2017-07-07","2017-07-10","2017-07-11","2017-07-12","2017-07-13","2017-07-14","2017-07-17","2017-07-18","2017-07-19","2017-07-20","2017-07-21","2017-07-24","2017-07-25","2017-07-26","2017-07-27","2017-07-28","2017-07-31","2017-08-01","2017-08-02","2017-08-03","2017-08-04","2017-08-07","2017-08-08","2017-08-09","2017-08-10","2017-08-11","2017-08-14","2017-08-15","2017-08-16","2017-08-17","2017-08-18","2017-08-21","2017-08-22","2017-08-23","2017-08-24","2017-08-25","2017-08-28","2017-08-29","2017-08-30","2017-08-31","2017-09-01","2017-09-04","2017-09-05","2017-09-06","2017-09-07","2017-09-08","2017-09-11","2017-09-12","2017-09-13","2017-09-14","2017-09-15","2017-09-18","2017-09-19","2017-09-20","2017-09-21","2017-09-22","2017-09-25","2017-09-26","2017-09-27","2017-09-28","2017-09-29","2017-10-02","2017-10-03","2017-10-04","2017-10-05","2017-10-06","2017-10-09","2017-10-10","2017-10-11","2017-10-12","2017-10-13","2017-10-16","2017-10-17","2017-10-18","2017-10-19","2017-10-20","2017-10-23","2017-10-24","2017-10-25","2017-10-26","2017-10-27","2017-10-30","2017-10-31","2017-11-01","2017-11-02","2017-11-03","2017-11-06","2017-11-07","2017-11-08","2017-11-09","2017-11-10","2017-11-13","2017-11-14","2017-11-15","2017-11-16","2017-11-17","2017-11-20","2017-11-21","2017-11-22","2017-11-23","2017-11-24","2017-11-27","2017-11-28","2017-11-29","2017-11-30","2017-12-01","2017-12-04","2017-12-05","2017-12-06","2017-12-07","2017-12-08","2017-12-11","2017-12-12","2017-12-13","2017-12-14","2017-12-15","2017-12-18","2017-12-19","2017-12-20","2017-12-21","2017-12-22","2017-12-25","2017-12-26","2017-12-27","2017-12-28","2017-12-29","2018-01-01","2018-01-02","2018-01-03","2018-01-04","2018-01-05","2018-01-08","2018-01-09","2018-01-10","2018-01-11","2018-01-12","2018-01-15","2018-01-16","2018-01-17","2018-01-18","2018-01-19","2018-01-22","2018-01-23","2018-01-24","2018-01-25","2018-01-26","2018-01-29","2018-01-30","2018-01-31","2018-02-01","2018-02-02","2018-02-05","2018-02-06","2018-02-07","2018-02-08","2018-02-09","2018-02-12","2018-02-13","2018-02-14","2018-02-15","2018-02-16","2018-02-19","2018-02-20","2018-02-21","2018-02-22","2018-02-23","2018-02-26","2018-02-27","2018-02-28","2018-03-01","2018-03-02","2018-03-05","2018-03-06","2018-03-07","2018-03-08","2018-03-09","2018-03-12","2018-03-13","2018-03-14","2018-03-15","2018-03-16","2018-03-19","2018-03-20","2018-03-21","2018-03-22","2018-03-23","2018-03-26","2018-03-27","2018-03-28","2018-03-29","2018-03-30","2018-04-02","2018-04-03","2018-04-04","2018-04-05","2018-04-06","2018-04-09","2018-04-10","2018-04-11","2018-04-12","2018-04-13","2018-04-16","2018-04-17","2018-04-18","2018-04-19","2018-04-20","2018-04-23","2018-04-24","2018-04-25","2018-04-26","2018-04-27","2018-04-30","2018-05-01","2018-05-02","2018-05-03","2018-05-04","2018-05-07","2018-05-08","2018-05-09","2018-05-10","2018-05-11","2018-05-14","2018-05-15","2018-05-16","2018-05-17","2018-05-18","2018-05-21","2018-05-22","2018-05-23","2018-05-24","2018-05-25","2018-05-28","2018-05-29","2018-05-30","2018-05-31","2018-06-01","2018-06-04","2018-06-05","2018-06-06","2018-06-07","2018-06-08","2018-06-11","2018-06-12","2018-06-13","2018-06-14","2018-06-15","2018-06-18","2018-06-19","2018-06-20","2018-06-21","2018-06-22","2018-06-25","2018-06-26","2018-06-27","2018-06-28","2018-06-29","2018-07-02","2018-07-03","2018-07-04","2018-07-05","2018-07-06","2018-07-09","2018-07-10","2018-07-11","2018-07-12","2018-07-13","2018-07-16","2018-07-17","2018-07-18","2018-07-19","2018-07-20","2018-07-23","2018-07-24","2018-07-25","2018-07-26","2018-07-27","2018-07-30","2018-07-31","2018-08-01","2018-08-02","2018-08-03","2018-08-06","2018-08-07","2018-08-08","2018-08-09","2018-08-10","2018-08-13","2018-08-14","2018-08-15","2018-08-16","2018-08-17","2018-08-20","2018-08-21","2018-08-22","2018-08-23","2018-08-24","2018-08-27","2018-08-28","2018-08-29","2018-08-30","2018-08-31","2018-09-03","2018-09-04","2018-09-05","2018-09-06","2018-09-07","2018-09-10","2018-09-11","2018-09-12","2018-09-13","2018-09-14","2018-09-17","2018-09-18","2018-09-19","2018-09-20","2018-09-21","2018-09-24","2018-09-25","2018-09-26","2018-09-27","2018-09-28","2018-10-01","2018-10-02","2018-10-03","2018-10-04","2018-10-05","2018-10-08","2018-10-09","2018-10-10","2018-10-11","2018-10-12","2018-10-15","2018-10-16","2018-10-17","2018-10-18","2018-10-19","2018-10-22","2018-10-23","2018-10-24","2018-10-25","2018-10-26","2018-10-29","2018-10-30","2018-10-31","2018-11-01","2018-11-02","2018-11-05","2018-11-06","2018-11-07","2018-11-08","2018-11-09","2018-11-12","2018-11-13","2018-11-14","2018-11-15","2018-11-16","2018-11-19","2018-11-20","2018-11-21","2018-11-22","2018-11-23","2018-11-26","2018-11-27","2018-11-28","2018-11-29","2018-11-30","2018-12-03","2018-12-04","2018-12-05","2018-12-06","2018-12-07","2018-12-10","2018-12-11","2018-12-12","2018-12-13","2018-12-14","2018-12-17","2018-12-18","2018-12-19","2018-12-20","2018-12-21","2018-12-24","2018-12-25","2018-12-26","2018-12-27","2018-12-28","2018-12-31","2019-01-01","2019-01-02","2019-01-03","2019-01-04","2019-01-07","2019-01-08","2019-01-09","2019-01-10","2019-01-11","2019-01-14","2019-01-15","2019-01-16","2019-01-17","2019-01-18","2019-01-21","2019-01-22","2019-01-23","2019-01-24","2019-01-25","2019-01-28","2019-01-29","2019-01-30","2019-01-31","2019-02-01","2019-02-04","2019-02-05","2019-02-06","2019-02-07","2019-02-08","2019-02-11","2019-02-12","2019-02-13","2019-02-14","2019-02-15","2019-02-18","2019-02-19","2019-02-20","2019-02-21","2019-02-22","2019-02-25","2019-02-26","2019-02-27","2019-02-28","2019-03-01","2019-03-04","2019-03-05","2019-03-06","2019-03-07","2019-03-08","2019-03-11","2019-03-12","2019-03-13","2019-03-14","2019-03-15","2019-03-18","2019-03-19","2019-03-20","2019-03-21","2019-03-22","2019-03-25","2019-03-26","2019-03-27","2019-03-28","2019-03-29","2019-04-01","2019-04-02","2019-04-03","2019-04-04","2019-04-05","2019-04-08","2019-04-09","2019-04-10","2019-04-11","2019-04-12","2019-04-15","2019-04-16","2019-04-17","2019-04-18","2019-04-19","2019-04-22","2019-04-23","2019-04-24","2019-04-25","2019-04-26","2019-04-29","2019-04-30","2019-05-01","2019-05-02","2019-05-03","2019-05-06","2019-05-07","2019-05-08","2019-05-09","2019-05-10","2019-05-13","2019-05-14","2019-05-15","2019-05-16","2019-05-17","2019-05-20","2019-05-21","2019-05-22","2019-05-23","2019-05-24","2019-05-27","2019-05-28","2019-05-29","2019-05-30","2019-05-31","2019-06-03","2019-06-04","2019-06-05","2019-06-06","2019-06-07","2019-06-10","2019-06-11","2019-06-12","2019-06-13","2019-06-14","2019-06-17","2019-06-18","2019-06-19","2019-06-20","2019-06-21","2019-06-24","2019-06-25","2019-06-26","2019-06-27","2019-06-28","2019-07-01","2019-07-02","2019-07-03","2019-07-04","2019-07-05","2019-07-08","2019-07-09","2019-07-10","2019-07-11","2019-07-12","2019-07-15","2019-07-16","2019-07-17","2019-07-18","2019-07-19","2019-07-22","2019-07-23","2019-07-24","2019-07-25","2019-07-26","2019-07-29","2019-07-30","2019-07-31","2019-08-01","2019-08-02","2019-08-05","2019-08-06","2019-08-07","2019-08-08","2019-08-09","2019-08-12","2019-08-13","2019-08-14","2019-08-15","2019-08-16","2019-08-19","2019-08-20","2019-08-21","2019-08-22","2019-08-23","2019-08-26","2019-08-27","2019-08-28","2019-08-29","2019-08-30","2019-09-02","2019-09-03","2019-09-04","2019-09-05","2019-09-06","2019-09-09","2019-09-10","2019-09-11","2019-09-12","2019-09-13","2019-09-16","2019-09-17","2019-09-18","2019-09-19","2019-09-20","2019-09-23","2019-09-24","2019-09-25","2019-09-26","2019-09-27","2019-09-30","2019-10-01","2019-10-02","2019-10-03","2019-10-04","2019-10-07","2019-10-08","2019-10-09","2019-10-10","2019-10-11","2019-10-14","2019-10-15","2019-10-16","2019-10-17","2019-10-18","2019-10-21","2019-10-22","2019-10-23","2019-10-24","2019-10-25","2019-10-28","2019-10-29","2019-10-30","2019-10-31","2019-11-01","2019-11-04","2019-11-05","2019-11-06","2019-11-07","2019-11-08","2019-11-11","2019-11-12","2019-11-13","2019-11-14","2019-11-15","2019-11-18","2019-11-19","2019-11-20","2019-11-21","2019-11-22","2019-11-25","2019-11-26","2019-11-27","2019-11-28","2019-11-29","2019-12-02","2019-12-03","2019-12-04","2019-12-05","2019-12-06","2019-12-09","2019-12-10","2019-12-11","2019-12-12","2019-12-13","2019-12-16","2019-12-17","2019-12-18","2019-12-19","2019-12-20","2019-12-23","2019-12-24","2019-12-25","2019-12-26","2019-12-27","2019-12-30","2019-12-31"],[20797,26040,27551,28444,26191,31350,33228,33744,33309,31736,33591,34645,34456,33646,32434,33874,35666,35679,35302,32608,34079,35571,35993,34699,33052,10924,35025,36525,35753,34357,35173,35847,36576,35664,34169,35277,36950,36942,36345,33846,34688,36891,36261,35692,32606,35195,36779,35641,33449,33183,33688,34334,28582,32376,33242,11365,34881,36747,36647,33557,34769,37135,37034,36267,34293,37210,36836,32116,33904,29195,28879,26770,11123,9335,27550,26681,34015,33950,32492,33883,36281,36835,36501,33813,11434,33159,36097,30627,30630,31890,36802,29392,31734,33598,34888,37619,37721,35301,34194,32250,36903,36240,31036,34581,33724,37808,34906,34568,33913,35108,34525,33744,36083,34284,35708,33639,31464,36253,34833,34772,36897,36517,36622,34939,30702,31125,28181,30645,31596,30379,32810,32436,34436,31542,27667,27832,31779,33591,32022,32846,32867,33616,32550,28957,25810,26777,32477,30218,31308,32982,34483,34516,30522,31409,33593,35547,32018,23522,30929,32458,35997,36112,30809,29459,34354,36485,36792,36366,31382,26867,28761,25375,30416,29008,32304,32397,32669,34468,28102,34911,36356,36339,35135,27289,33940,21217,17295,21128,22761,23950,27746,28657,28909,27218,31091,32402,31969,32118,31116,32416,34349,33947,32949,32222,32305,35145,34586,32337,32079,33112,34677,33714,33599,31702,31673,31114,32195,19264,27926,33214,34935,34646,34353,32391,32848,34462,34733,34700,32893,11329,33509,33855,33087,31152,31921,33243,33019,32328,29786,31429,33649,32758,32433,30005,27804,25834,30164,29914,28177,27511,28657,28454,25870,22744,3377,16150,17244,16982,14961,3402,18538,22255,23565,23091,28537,30166,30224,30172,28551,28691,27938,28218,28947,27935,29684,29967,24250,28643,27135,25194,27121,28803,29218,28189,9933,30589,31528,29635,25669,30808,32317,32495,29954,24010,31266,33876,33050,32332,31196,31143,33354,33938,33227,31394,32204,33830,31716,32991,29185,30144,33264,30668,30865,30856,11331,31780,31793,32453,31040,27857,28448,26395,12046,8819,28373,29935,28133,28328,26389,32102,32165,31493,31002,31227,32161,33705,33469,32538,31073,30784,32301,32313,31148,30039,25590,12546,31772,31729,28257,31253,24878,32871,26150,30299,31633,33282,33097,32890,30710,30259,30990,33107,33354,30176,32108,33967,32770,32255,29529,32158,33460,33485,33392,29399,29570,24750,20774,16200,21223,20330,30882,31523,29408,28712,27147,25400,29530,28039,28941,26289,28164,30668,30983,28447,25013,26268,27502,29465,24077,28553,29142,29303,29774,25127,28090,29877,29280,26340,26767,28692,28374,30702,30291,27584,25046,26784,29877,28407,26635,23505,30860,24471,28604,26618,28392,30175,29710,29448,28222,26185,26723,30372,27644,28503,30642,32398,31217,29639,30461,31196,28249,27647,25000,28870,26520,31154,27906,31263,30230,30433,30197,28712,30234,28472,30530,32345,31407,27765,28881,30459,31471,27046,29965,29482,30852,29985,30331,30640,27582,30092,31765,31467,31496,28286,27320,30957,27387,19573,8176,28764,31331,30934,30712,29507,29025,30209,15398,29207,28656,10735,29542,30559,29783,28856,29449,30308,29077,27934,27266,29474,28543,29768,29207,27164,28123,28708,24724,27736,26169,25831,26760,25585,23710,21393,9182,3258,14973,15815,14977,8796,3754,17252,19927,20149,25996,27710,28372,29572,27774,28746,29687,30089,29077,28047,28815,30199,29508,26702,27718,29123,30438,29875,29627,27593,9800,29748,30516,30315,29268,30007,30948,27016,30638,29950,30746,32356,31943,31487,30348,28366,32623,32420,32139,29889,26394,28921,31622,31490,31530,31588,31098,32427,32199,29926,10388,30192,32133,31029,29687,30774,32346,32576,31992,30392,31542,33571,32716,31022,30425,29940,32129,32545,32220,30409,26882,27199,24950,10941,8446,26482,30126,30168,29736,21801,28906,30306,12121,29602,28499,30472,32105,31813,30842,23844,30011,30268,26757,23509,24287,29722,29757,31080,30674,28157,30381,32255,31994,31743,28611,31478,30536,26887,23783,24479,30308,32536,32446,27449,28716,30092,29680,31943,29387,28869,23363,29280,29677,29147,28094,27540,27508,30354,27725,28884,22559,30390,26654,27501,25231,27899,29159,29798,23946,25177,28012,26020,28377,18169,19847,27295,29622,28364,29370,27295,24023,28879,26972,30270,26657,27702,30279,30118,30218,29198,29267,31164,30737,27990,27442,29784,31587,32061,30887,29375,30913,31654,31061,30485,29321,29891,26991,29363,30047,26250,6549,26714,26238,25379,25841,30155,25461,25232,30404,29399,26871,27790,29985,29816,28077,30681,30185,28379,30870,26932,29828,32140,28739,18562,28089,27797,29863,30251,25208,25864,26772,30402,24836,27383,23147,28862,26752,30503,30308,29218,28337,30553,29852,29445,27679,9834,28800,30622,29984,28518,29245,30497,30825,29858,28711,28302,30096,29805,29546,27666,28346,30453,28883,24522,26383,26817,27383,24767,24632,23004,17405,10507,3475,14915,15194,14671,9760],[14.49,15.22,16.89,15.99,17.85,10.91,12.85,14.29,15.21,13.39,14.43,14.55,15.61,15.65,16,15.98,15.34,16.39,16.71,16.98,12.79,14.73,17.19,14.87,14.37,16.2,17.04,17.39,16.64,14.9,16.61,16.56,16.33,15.76,15.81,17.39,15.42,16.51,17.82,16.93,18.48,19.31,19.19,16.3,15.18,16.61,17.71,15.21,14.78,15,14.65,13.72,12.74,13.77,15.57,16.48,17.47,17.85,17.86,18.67,17.62,19.63,19.43,19.92,19.09,24.77,20.06,18.2,19.89,20.22,18.85,17.32,16.7,17.25,16.31,13.87,14.73,16.52,18.18,18.04,19.36,24.13,20.7,22.68,21.53,20.5,20.38,17.81,16.73,18.48,18.35,19.16,19.34,18.53,20.68,22.09,22.18,22.42,21.89,21.63,23.17,20.84,18.72,20.97,18.75,17.81,17.04,17.36,18.65,19.89,19.33,18.56,18.91,19.04,18.95,18.88,17.99,18.79,19.7,19.16,17.7,18.09,20.13,21.09,16.73,17.2,16.72,17.49,17.19,16.76,16.13,15.95,16.32,16.14,15.92,15.47,16.21,17.8,18.31,17.34,16.57,17.07,16.93,16.57,15.61,15.83,17.04,17.16,17.7,18.91,18.45,18.92,18.93,18.57,19.5,19,16.32,15.58,17.51,18.2,18.27,18.49,19.63,17.81,18.01,18.32,19.03,18.41,17.37,16.78,16.22,15.77,16.41,16.86,16.42,16.82,15.89,15.66,16.03,15.5,16.49,17.34,18.98,19.4,18.75,19.5,19.17,18.79,18.98,17.88,18.88,17.52,17.23,16.11,16.95,16.56,17.51,17.77,17.27,18.76,18.52,16.34,15.34,16.19,15.62,15.74,16.41,17.47,18.41,15.91,14.93,12.33,14.21,16.04,16.65,17.58,17.72,19.43,18.42,17.08,17.13,17.41,15.61,15.23,14.86,15.02,14.93,14.64,15.26,13.98,15.19,13.34,11.58,16.12,11.87,13.54,13.91,12.93,11.93,15.28,15.7,15.34,15.34,15.19,10.01,12.1,12.11,14.1,14.97,15.42,15.26,15.82,15.79,15.49,13.43,14.29,14.34,12.99,13.09,12.41,12.37,13.87,12.96,15.17,13.62,12.43,14.38,15.22,12.9,10.37,11.32,10.79,11.05,12.5,15.77,14.34,12.79,11.61,13.1,9.42,7.64,11.53,12.01,18.63,16.93,16.96,16.22,14.14,13.13,15.73,14.84,15.67,15.94,16.54,16.28,16.6,16.98,16.39,16.54,17.81,18.19,18.66,18.98,17.29,15.46,18.17,15.55,11.18,20.58,17.73,18.59,17.13,17.3,17.88,18.97,18.86,18.81,17.79,17.64,19.6,19.83,19.25,17.98,15.97,19.53,20.21,18.9,17.86,16.73,19.95,16.52,14.45,13.5,19.33,18.98,19.31,20.38,19.43,18.69,18.51,18.4,17.7,18.11,18.76,17.9,18.01,17.79,18.49,18.3,16.1,14.62,17.08,17,17.9,20.54,20.06,20.09,20.45,21.05,18.19,18.93,19.51,20.12,19.25,20.79,22.57,23.31,22.52,20.67,20,20.13,21.25,20.95,19.52,19.05,17.24,16.6,15.59,16.33,15.37,16.68,17.52,17.27,17.73,17.25,16.74,17.67,16.97,15.39,20.63,17.38,17.33,17.54,15.93,16.36,15.84,15.35,16.1,16.35,16.65,16.56,17.46,18.72,17.46,20.11,20.03,19.66,18.33,17.13,18.54,17.53,18.2,17.29,16.48,16.13,16.23,17.08,16.45,16.52,16.11,17,16.67,16.97,16.43,17.18,16.45,17.1,17.18,24.46,16.73,15.76,16.02,16.99,16.93,20.39,18.12,17.27,16.29,17.43,18.14,17.59,17.93,16.88,17.87,17.07,16.31,17.54,18.32,19,17.67,17.78,17.5,17.2,17.12,17.87,16.76,16.95,16.65,16.67,16.72,17.53,16.9,17.22,17.48,17.63,17.11,15.52,15.86,15.88,16.61,16.36,16.7,18.39,17.56,16,16.48,16.52,15.91,14.28,16.42,17.59,18.71,18.75,18.41,17.09,15.04,6.97,11.82,12.88,15.11,15.95,15.76,17.01,17.24,15.73,15.89,15.53,14.77,16.12,16.58,15.21,13.83,14.78,16.94,14.82,13.05,13.97,15.18,14.6,13.63,14.78,15.64,11.89,11.51,12.26,13.03,12.96,14.1,13.87,14.45,13.95,12.78,13.36,14.25,15.38,13.62,11.81,13.2,14.7,12.9,12.87,14.32,14.29,14.87,15.27,15.11,15.94,16.1,16.54,14.08,14.34,14.67,14.76,14.56,17.07,17.18,17.72,17.8,14.86,16.33,15.52,13.25,16.35,18.18,19.32,18.72,18,17.74,18.03,15.17,17.25,18.86,18.6,15.19,18.5,17.78,17.28,18.72,19.58,20.93,19.58,19.48,19.72,18.06,16.66,15.91,16.34,15.01,15.73,18.47,16.94,16.15,16.79,18.26,19.03,19.15,18.8,18.27,18.57,16.75,16.56,17.86,19.5,19.06,18.56,20.16,20.72,21.86,16.54,19.48,20.52,20,19.68,17.82,17.95,17.56,13.34,22.76,19.04,19.13,20.74,21.06,21.12,21.29,20.53,20.53,21.43,17.87,16.97,21.12,20.93,20.42,20.77,18.87,19.46,20.28,20.71,20.96,19.67,17.21,16.95,17.17,16.55,16.45,18.34,17.04,17.77,16.39,17.05,20.47,19.02,17.76,18.84,19.82,16.67,16.59,17.33,17.61,16.64,16.35,16.35,16.43,17.63,18.54,16.75,17.37,17.99,17.3,16.27,18.48,18.43,16.64,16.64,16.53,17.51,16.53,15.63,15.22,15.38,16.65,16.48,17.14,17.96,17.92,17.39,16.46,16.21,17.88,18.04,18.3,18.54,18.77,18.41,19.82,17.98,17.12,16.82,17.44,17.32,18.19,18.35,19.25,18.22,18.3,18,17.65,17.67,18.19,18.15,17.5,16.89,17.25,16.85,16.25,17.23,17.82,17.59,17.01,17.27,17.99,17.86,17.77,18.28,19.02,16.31,17.1,17.83,16.99,16.77,17.27,15.67,18.04,19.09,19.23,19.24,18.32,16.55,15.1,18.31,18.21,16.81,16.25,15.69,16.05,16.9,17.88,17.53,15.59,15.25,16.46,15.57,15.88,17.1,16.38,17.9,16.08,15.19,16.44,14.99,15.65,16.46,17.23,17.65,17.66,17.64,17.2,18.51,17.89,17.85,15.29,16.34,15.81,15.39,15.61,15.72,15.79,13.56,14.9,16.05,15.09,14.74,10.76,11.88,12.83,13.47,14.35,14.64,14.68,14.54,16.89,15.58],[23.03,31.5,26.61,35.02,47.21,42.24,29.42,30.82,30.19,25.67,28.67,28.16,30.97,23.14,13.49,28.06,25.32,25.99,37.66,31.72,37.97,40.34,33.51,29.61,25.12,25.75,33.19,26.64,14.2,32.66,30.59,29.39,18.38,15.25,12.71,9.289999999999999,28.98,22.51,22.81,21.2,28.67,32.83,33.99,29.04,17.73,25.25,23.18,27.08,25.51,33.13,23.24,16.02,21.39,23.92,21.55,18.2,16.44,16.42,24.68,37.78,19.83,19.35,17.05,22.62,27.04,22.29,44.6,36.97,31.41,33.81,28.79,16.5,18.58,20.19,21.73,24.25,24.07,21.97,25.57,31.28,37.02,25.63,40.01,31.27,45.02,40.44,44.88,39.59,34.18,36.11,42.07,41.01,31.38,28.38,36.85,38.44,41.79,41.2,36.54,40.26,36.84,39.85,27.31,25.29,23.16,10.55,13.75,13.88,14.4,26.48,25.12,27.11,33.55,24.13,21.56,23.69,9.279999999999999,12.9,15.74,9.75,10.43,14.15,20.96,18,11.52,24.41,18.69,24.38,17.27,15.22,17.92,18.13,15.75,10.11,19.43,22.05,26.93,28.49,20.19,22.43,23.45,21.84,17.15,18.14,22.64,23.01,13.09,24.21,19.64,12.49,17.25,17.14,18.52,19.61,19.55,16.45,13.95,5.93,17.52,12.71,25.74,13.15,11.84,21.09,12.06,12.42,15.24,11.04,20.51,15.34,10.75,15.32,20.56,17.01,12.73,13.1,13.79,7.92,14.97,14.73,23.58,24.59,23.4,20.22,13.76,17.17,21.94,19.56,12.34,17.09,26.67,19.69,8.449999999999999,8.119999999999999,6.96,8.15,7.02,7.41,9.41,18.6,13.46,8.9,8.18,9.16,6.78,8.83,21.65,23.59,22.8,9.09,9.949999999999999,9.66,28.48,28.2,28.8,30.62,34.7,28.58,13.7,22.96,16.11,18.93,35.47,26.03,7.49,8.23,22.28,17.19,29.13,27.9,24.79,20.14,23.63,39.11,20.03,33.77,29.34,29.4,38.67,39.23,38.21,32.9,25.28,12.47,36.25,31.63,35.78,55.14,27.45,28.68,30.44,32.06,34.32,30.25,42.3,27.85,28.06,26.8,34.85,49.97,24.87,35.84,43.8,43.33,34.54,27.62,40.08,45.16,26.68,29.06,34.63,25.91,33.12,35.85,22.4,37.05,29.24,22.47,30.94,6.38,14.88,21.31,18.81,19.28,20.48,29.31,27.67,17.05,18.58,22.35,35.07,21.36,23.68,24.35,22.2,20.81,28.09,31.26,33.95,23.61,30.35,30.8,32.01,32.91,28.66,30.59,33.75,19.19,27.66,20.77,24.99,31.02,27.81,28.34,23.68,29.01,33.61,22.24,22.56,29.47,29.13,24.12,24.15,22.33,21.6,23.26,28.46,27.7,31.2,26.47,27.69,16.93,24.28,20.78,28.63,24.1,23.19,21.97,22.57,25.81,29.82,26.97,38.88,31.47,26.5,17.64,18.93,24.02,32.08,16.74,22.96,23.2,21.92,23.98,29.11,23.83,18.01,20.46,19.73,29.13,30.47,28.48,21.16,23.96,20.98,21.56,21.29,17.49,24.58,9.130000000000001,22.98,29.01,28.82,21.79,19.57,28,13.22,18.79,25.64,9.68,9.66,11.09,16.26,8.81,18.9,22.85,20.17,14.98,24.09,28.42,21.57,29.51,17.76,13.12,21.72,14.87,20.95,19.6,23.57,34.62,22.66,20.34,19.95,17.48,20.06,18.88,17.17,20.63,23.21,17.79,19.12,10.79,10.37,10.32,10.57,18.55,19.78,20.85,20.22,20.21,23.35,21.88,23.51,20.41,15.32,12.37,12.75,17.4,17.8,17.26,11.74,20.01,16.53,18.2,26.74,22.91,15.5,13.43,23.17,24.55,22.7,26.48,19.08,18.07,21.36,29.03,26.38,18.89,16.02,18.23,17.35,18.53,17.51,14.92,10.86,9.48,8.27,9.630000000000001,13.6,24.7,18.21,23.89,27.62,19.24,12.13,17.22,9.119999999999999,6.64,10.13,7.45,18.62,18.91,25.92,26.2,11.63,19.46,20.64,23,18.63,13.9,24.11,24.63,18.95,19.2,19.81,24.72,23.91,21.54,24.62,27.75,29.41,34.65,33,37.69,34.08,28.2,14.41,6.3,7.42,23.19,36.42,24.95,23.12,17.64,36.63,53.51,45.23,17.78,22.18,40.53,49.53,15.89,17.97,29.71,36.8,84.37,28.73,15.55,18.79,17.58,67.20999999999999,36.15,26.75,30.86,25.98,23.53,26.36,23.01,24.7,22.13,29.65,31.96,31.39,24.5,27.21,21.28,17.72,21.34,19.38,19.42,24.82,15.08,16.63,19.95,25.48,28.53,33.23,30.53,20.04,24.23,27.66,30.84,26.9,22.69,17.95,11.73,12.54,10.55,12.67,21.71,17.24,15.05,18.77,28.31,18.62,20.42,22.34,24.03,23.03,26.9,24.44,22.42,27.6,29.72,20.22,20.43,21.3,23.98,18.28,14.79,11.45,16.67,19.34,28.77,27.59,27.47,25.82,30.07,29.81,31.62,19.75,25.9,26.47,22.72,40.64,36.79,32.98,22.15,20.31,30.44,34.12,36.97,38.05,36.47,40.9,29.42,18.45,20.29,27.37,39.03,33.45,28.12,34.19,36.2,77.34,64.70999999999999,67.08,65.22,36.05,32.39,33.33,24.57,30.31,31.03,22.67,30.23,30.67,29.17,23.13,11.16,12.64,12.24,15.68,19.17,16.98,10.46,20.19,12.17,11.61,23.69,17.72,22.11,28.61,27.8,11.19,14.18,18.88,12.15,12.57,13.89,15.69,13.28,23.73,23.5,19.88,24.46,20.57,22.95,22.45,20.56,17.31,15.63,21.24,16.57,14.78,16.36,17.07,19.71,16.44,14.42,17.42,23.79,15.82,18.05,15.11,15.59,12.07,12.22,24.89,10.01,13.92,14.11,15.52,16.48,12.5,11.85,12.62,16.4,24.7,19.74,20.66,20.85,19.29,16.37,13.84,14.4,18.23,20.07,22.38,16.74,19.9,15.27,12.79,9.460000000000001,23.55,21.24,10.32,18.51,24.04,18.93,24.11,29.06,27.85,15.1,7.24,12.13,11.64,11.63,14.45,9.800000000000001,7.1,9.130000000000001,18.54,16.27,16.66,20.41,14.04,10.97,9.18,8.17,14.86,15.33,17.76,22.57,32.69,20.93,26.71,13.64,21.22,24.6,20.38,15.31,16.21,12.78,18.91,13.87,10.05,10,19.92,15.34,29.04,26.32,30.44,24.71,26.71,24.13,26.81,21.08,26.55,23.81,21.11,20.97,23.68,17.71,25.94,24.89,31.38,24.54,18.67,18.61,25.28,35.55,38.1,37.52,38.09,19.77,43.71,21.97,31.62,10.88,15.35]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>fecha_retiro<\/th>\n      <th>Trips<\/th>\n      <th>TMP<\/th>\n      <th>PM2.5<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":7,"searching":false,"initComplete":"function(settings, json) {\n$(this.api().table().container()).css({'font-size': '12px'});\n}","columnDefs":[{"className":"dt-right","targets":[1,2,3]},{"name":"fecha_retiro","targets":0},{"name":"Trips","targets":1},{"name":"TMP","targets":2},{"name":"PM2.5","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[7,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":["options.initComplete"],"jsHooks":[]}</script>
]
.pull-right[
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-12-1.png" width="80%" /&gt;
]

We want to estimate the following relationship: 

`$$Trips_i=\beta_0+\beta_1Temperature_i+u_i$$`

---
### Best Fit Line 
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-13-1.png" width="100%" /&gt;

---
### Regression output in R


``` r
# Fit a linear regression model
lm_model &lt;- lm(Trips ~ TMP, data = Data_BP)
# Display the summary of the linear regression model
summary(lm_model)
```

```
## 
## Call:
## lm(formula = Trips ~ TMP, data = Data_BP)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -24010.5  -1508.4    774.5   2920.5   8900.2 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 16892.66    1427.32  11.835   &lt;2e-16 ***
## TMP           723.55      83.37   8.679   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 5302 on 779 degrees of freedom
## Multiple R-squared:  0.08817,	Adjusted R-squared:  0.087 
## F-statistic: 75.32 on 1 and 779 DF,  p-value: &lt; 2.2e-16
```


---

&lt;center&gt;
&lt;img src=Exam_qs_to_paste/use_correlation_for_coefficiients.png width="800"&gt;
&lt;/center&gt;


---
### Fit of linear regression

&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-15-1.png" width="100%" /&gt;

---

![](Expl_unexpl.png)

---

### Measure of fit - R squared
How much we managed to explain with our regression? 

- SST= total sum of squares = `\(S_{yy}=\sum(y_i-\bar{y})^2=\sum y_i^2-n\bar{y}^2\)`
- SSR= regression sum of squares = `\(\sum(\hat{y}_i-\bar{y})^2=\sum \hat{y}_i^2-n\bar{y}^2\)`

Measure of fit is:

$$R^2=\frac{SSR}{SST}=1-\frac{SSE}{SST}=1-\frac{\sum(y_i-\hat{y})^2}{\sum(y_i-\bar{y})^2} $$
Intuition: 
- How much variation in `\(y\)` can we explain with our model
- It is always between 0 and 1
  - In fact `\(SST=SSR+SSE=\sum(\hat{y}_i-\bar{y})^2+\sum(\hat{y}_i-y_i)^2\)`
- SSE/SST is proportion that cannot be explained with the model
- so 1-SSE/SST is the variation that we can explain with the model

---
### Illustration in the app

---

### Measure of fit: R squared

If we have just one regressor, the `\(R^2\)` is related to correlation between x and y.

`$$R^2=(\rho(x,y))^2$$`
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-16-1.png" width="100%" /&gt;
---

#### How much of bike usage does the temperature explains?

 
- Total Variation in y: `\(S_{yy}=\sum(y_i-\bar y)^2=24012556582\)`
- Explained Variation in y: `\(SSR=\sum(\hat y_i-\bar y)^2=2117129482\)`
- Unexplained Variation in y: `\(SSE=\sum\hat e^2=21895427100\)`


```
## 
## Call:
## lm(formula = Trips ~ TMP, data = Data_BP)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -24010.5  -1508.4    774.5   2920.5   8900.2 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 16892.66    1427.32  11.835   &lt;2e-16 ***
## TMP           723.55      83.37   8.679   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 5302 on 779 degrees of freedom
## Multiple R-squared:  0.08817,	Adjusted R-squared:  0.087 
## F-statistic: 75.32 on 1 and 779 DF,  p-value: &lt; 2.2e-16
```

---
### Scaling of variables:

--
- You built a linear regression explaining how one more peso spent on training improves the performance of the employee.

--
- You will present this regression to a client from US, who has no idea what a peso is.

--
- You need to translate it to dollars

Suppose that we used `\(x\)` and `\(y\)` in our sample to estimate `\(\hat{\beta}_1\)` and `\(\hat{\beta}_0\)`.

- Let's say that the scale of x changed. New `\(z=a x+ c\)`. 
  - How do `\(\hat{\beta}_1\)` and `\(\hat{\beta}_0\)` change?

- Let's say that the scale of y changed. New `\(y'=b y+ d\)`. 
  - How do `\(\hat{\beta}_1\)` and `\(\hat{\beta}_0\)` change?
  
- Suppose that `\(\bar{y}=0\)` and `\(\bar{x}=0\)`. What is `\(\hat{\beta}_0\)`?


---
### Scaling of variables:

Effect on slope is easiest derived using the definition with correlation:

`$$\begin{aligned}
\hat{\beta}'_1 &amp;= \text{cor}(z, y') \cdot \frac{\text{sd}(y')}{\text{sd}(z)} \\
               &amp;= \text{cor}(a x + c, b y + d) \cdot \frac{\text{sd}(b y + d)}{\text{sd}(a x + c)} \\
               &amp;= \text{cor}(x, y) \cdot \frac{b \cdot \text{sd}(y)}{a \cdot \text{sd}(x)} \\
               &amp;= \frac{b}{a} \hat{\beta}_1
\end{aligned}$$`

- correlation does not change when we scale variables
- adding constants does not matter for the slope
- multiplication of y or x changes the slope

---
### Scaling of variables:

Effect on the intercept is easiest seen through its formula:


$$
\begin{aligned}
\hat{\beta}_0' &amp;= \bar{y}' - \hat{\beta}_1' \bar{z} \\
               &amp;= (b \bar{y} + d) - \left( \frac{b}{a} \hat{\beta}_1 \right)(a \bar{x} + c) \\
               &amp;= b \bar{y} + d - b \hat{\beta}_1 \bar{x} - \frac{b}{a} \hat{\beta}_1 c \\
               &amp;= b(\bar{y} - \hat{\beta}_1 \bar{x}) + d - \frac{b}{a} \hat{\beta}_1 c \\
               &amp;= b \hat{\beta}_0 + d - \frac{b}{a} \hat{\beta}_1 c
\end{aligned}
$$
- multiplying y changes the intercept
- adding a constant to y changes the intercept
- adding a constant to x changes the intercept
- multiplying x only changes the intercept if we also add a constant to x

---

&lt;center&gt;
&lt;img src=Exam_qs_to_paste/Variable_scaling.png width="800"&gt;
&lt;/center&gt;

---
### Regression through the origin (HOMEWORK)

Suppose the following model:

`$$y_i=\beta_1x_i+u_i$$`
- What is the least square estimator for `\(\beta_1\)`?

--

- What happens if we use this estimator when it's not going through the origin?


---
### Regression with a Categorical Variable

- Very often in data, we work with **binary (dummy) variables**.  
- A **binary variable** takes the value:  
  - 1 if the condition is true,  
  - 0 otherwise.  

.blue[Example 1:]  
`$$x_i = \begin{cases} 
1 &amp; \text{if individual `\(i\)` is female} \\ 
0 &amp; \text{if individual `\(i\)` is male} 
\end{cases}$$`

.blue[Example 2:]  
`$$x_i = \begin{cases} 
1 &amp; \text{if transaction `\(i\)` is fraudulent} \\ 
0 &amp; \text{if transaction `\(i\)` is not fraudulent} 
\end{cases}$$`


.blue[Example 3:]  
`$$x_i = \begin{cases} 
1 &amp; \text{if client `\(i\)` made a purchase} \\ 
0 &amp; \text{if client `\(i\)` didn't make a purchase} 
\end{cases}$$`

---
### Regression with a categorical variable

- Suppose we regress `\(y_i\)` on a dummy `\(x_i\)`:  

`$$y_i = \beta_0 + \beta_1 x_i + u_i$$`  

--

- The OLS estimates have a simple interpretation:  
  - `\(\hat{\beta}_0 = \bar{y}_{x_i=0}\)`: the **mean of y** for the group with `\(x=0\)`  
  - `\(\hat{\beta}_1 = \bar{y}_{x_i=1} - \bar{y}_{x_i=0}\)`: the **difference in group means**  (change in y when x changes by 1)

--

.blue[Example:]  

- Let `\(x_i = 1\)` if female, `\(0\)` if male  
- Then:  

--
- `\(\hat{\beta}_0 = \bar{y}_{x_i=0} \quad \text{(mean outcome for males)}\)`  
- `\(\hat{\beta}_1 = \bar{y}_{x_i=1} - \bar{y}_{x_i=0} \quad \text{(difference in means)}\)`

---

.pull-left[
<div class="datatables html-widget html-fill-item" id="htmlwidget-e44d7ebd44ea771d3dac" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e44d7ebd44ea771d3dac">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[["2017-01-02","2017-01-03","2017-01-04","2017-01-05","2017-01-06","2017-01-09","2017-01-10","2017-01-11","2017-01-12","2017-01-13","2017-01-16","2017-01-17","2017-01-18","2017-01-19","2017-01-20","2017-01-23","2017-01-24","2017-01-25","2017-01-26","2017-01-27","2017-01-30","2017-01-31","2017-02-01","2017-02-02","2017-02-03","2017-02-06","2017-02-07","2017-02-08","2017-02-09","2017-02-10","2017-02-13","2017-02-14","2017-02-15","2017-02-16","2017-02-17","2017-02-20","2017-02-21","2017-02-22","2017-02-23","2017-02-24","2017-02-27","2017-02-28","2017-03-01","2017-03-02","2017-03-03","2017-03-06","2017-03-07","2017-03-08","2017-03-09","2017-03-10","2017-03-13","2017-03-14","2017-03-15","2017-03-16","2017-03-17","2017-03-20","2017-03-21","2017-03-22","2017-03-23","2017-03-24","2017-03-27","2017-03-28","2017-03-29","2017-03-30","2017-03-31","2017-04-04","2017-04-05","2017-04-06","2017-04-07","2017-04-10","2017-04-11","2017-04-12","2017-04-13","2017-04-14","2017-04-17","2017-04-18","2017-04-19","2017-04-20","2017-04-21","2017-04-24","2017-04-25","2017-04-26","2017-04-27","2017-04-28","2017-05-01","2017-05-02","2017-05-03","2017-05-04","2017-05-05","2017-05-08","2017-05-09","2017-05-10","2017-05-11","2017-05-12","2017-05-15","2017-05-16","2017-05-17","2017-05-18","2017-05-19","2017-05-22","2017-05-23","2017-05-24","2017-05-25","2017-05-26","2017-05-29","2017-05-30","2017-05-31","2017-06-01","2017-06-02","2017-06-05","2017-06-06","2017-06-07","2017-06-08","2017-06-09","2017-06-12","2017-06-13","2017-06-14","2017-06-15","2017-06-16","2017-06-19","2017-06-20","2017-06-21","2017-06-22","2017-06-23","2017-06-26","2017-06-27","2017-06-28","2017-06-29","2017-06-30","2017-07-03","2017-07-04","2017-07-05","2017-07-06","2017-07-07","2017-07-10","2017-07-11","2017-07-12","2017-07-13","2017-07-14","2017-07-17","2017-07-18","2017-07-19","2017-07-20","2017-07-21","2017-07-24","2017-07-25","2017-07-26","2017-07-27","2017-07-28","2017-07-31","2017-08-01","2017-08-02","2017-08-03","2017-08-04","2017-08-07","2017-08-08","2017-08-09","2017-08-10","2017-08-11","2017-08-14","2017-08-15","2017-08-16","2017-08-17","2017-08-18","2017-08-21","2017-08-22","2017-08-23","2017-08-24","2017-08-25","2017-08-28","2017-08-29","2017-08-30","2017-08-31","2017-09-01","2017-09-04","2017-09-05","2017-09-06","2017-09-07","2017-09-08","2017-09-11","2017-09-12","2017-09-13","2017-09-14","2017-09-15","2017-09-18","2017-09-19","2017-09-20","2017-09-21","2017-09-22","2017-09-25","2017-09-26","2017-09-27","2017-09-28","2017-09-29","2017-10-02","2017-10-03","2017-10-04","2017-10-05","2017-10-06","2017-10-09","2017-10-10","2017-10-11","2017-10-12","2017-10-13","2017-10-16","2017-10-17","2017-10-18","2017-10-19","2017-10-20","2017-10-23","2017-10-24","2017-10-25","2017-10-26","2017-10-27","2017-10-30","2017-10-31","2017-11-01","2017-11-02","2017-11-03","2017-11-06","2017-11-07","2017-11-08","2017-11-09","2017-11-10","2017-11-13","2017-11-14","2017-11-15","2017-11-16","2017-11-17","2017-11-20","2017-11-21","2017-11-22","2017-11-23","2017-11-24","2017-11-27","2017-11-28","2017-11-29","2017-11-30","2017-12-01","2017-12-04","2017-12-05","2017-12-06","2017-12-07","2017-12-08","2017-12-11","2017-12-12","2017-12-13","2017-12-14","2017-12-15","2017-12-18","2017-12-19","2017-12-20","2017-12-21","2017-12-22","2017-12-25","2017-12-26","2017-12-27","2017-12-28","2017-12-29","2018-01-01","2018-01-02","2018-01-03","2018-01-04","2018-01-05","2018-01-08","2018-01-09","2018-01-10","2018-01-11","2018-01-12","2018-01-15","2018-01-16","2018-01-17","2018-01-18","2018-01-19","2018-01-22","2018-01-23","2018-01-24","2018-01-25","2018-01-26","2018-01-29","2018-01-30","2018-01-31","2018-02-01","2018-02-02","2018-02-05","2018-02-06","2018-02-07","2018-02-08","2018-02-09","2018-02-12","2018-02-13","2018-02-14","2018-02-15","2018-02-16","2018-02-19","2018-02-20","2018-02-21","2018-02-22","2018-02-23","2018-02-26","2018-02-27","2018-02-28","2018-03-01","2018-03-02","2018-03-05","2018-03-06","2018-03-07","2018-03-08","2018-03-09","2018-03-12","2018-03-13","2018-03-14","2018-03-15","2018-03-16","2018-03-19","2018-03-20","2018-03-21","2018-03-22","2018-03-23","2018-03-26","2018-03-27","2018-03-28","2018-03-29","2018-03-30","2018-04-02","2018-04-03","2018-04-04","2018-04-05","2018-04-06","2018-04-09","2018-04-10","2018-04-11","2018-04-12","2018-04-13","2018-04-16","2018-04-17","2018-04-18","2018-04-19","2018-04-20","2018-04-23","2018-04-24","2018-04-25","2018-04-26","2018-04-27","2018-04-30","2018-05-01","2018-05-02","2018-05-03","2018-05-04","2018-05-07","2018-05-08","2018-05-09","2018-05-10","2018-05-11","2018-05-14","2018-05-15","2018-05-16","2018-05-17","2018-05-18","2018-05-21","2018-05-22","2018-05-23","2018-05-24","2018-05-25","2018-05-28","2018-05-29","2018-05-30","2018-05-31","2018-06-01","2018-06-04","2018-06-05","2018-06-06","2018-06-07","2018-06-08","2018-06-11","2018-06-12","2018-06-13","2018-06-14","2018-06-15","2018-06-18","2018-06-19","2018-06-20","2018-06-21","2018-06-22","2018-06-25","2018-06-26","2018-06-27","2018-06-28","2018-06-29","2018-07-02","2018-07-03","2018-07-04","2018-07-05","2018-07-06","2018-07-09","2018-07-10","2018-07-11","2018-07-12","2018-07-13","2018-07-16","2018-07-17","2018-07-18","2018-07-19","2018-07-20","2018-07-23","2018-07-24","2018-07-25","2018-07-26","2018-07-27","2018-07-30","2018-07-31","2018-08-01","2018-08-02","2018-08-03","2018-08-06","2018-08-07","2018-08-08","2018-08-09","2018-08-10","2018-08-13","2018-08-14","2018-08-15","2018-08-16","2018-08-17","2018-08-20","2018-08-21","2018-08-22","2018-08-23","2018-08-24","2018-08-27","2018-08-28","2018-08-29","2018-08-30","2018-08-31","2018-09-03","2018-09-04","2018-09-05","2018-09-06","2018-09-07","2018-09-10","2018-09-11","2018-09-12","2018-09-13","2018-09-14","2018-09-17","2018-09-18","2018-09-19","2018-09-20","2018-09-21","2018-09-24","2018-09-25","2018-09-26","2018-09-27","2018-09-28","2018-10-01","2018-10-02","2018-10-03","2018-10-04","2018-10-05","2018-10-08","2018-10-09","2018-10-10","2018-10-11","2018-10-12","2018-10-15","2018-10-16","2018-10-17","2018-10-18","2018-10-19","2018-10-22","2018-10-23","2018-10-24","2018-10-25","2018-10-26","2018-10-29","2018-10-30","2018-10-31","2018-11-01","2018-11-02","2018-11-05","2018-11-06","2018-11-07","2018-11-08","2018-11-09","2018-11-12","2018-11-13","2018-11-14","2018-11-15","2018-11-16","2018-11-19","2018-11-20","2018-11-21","2018-11-22","2018-11-23","2018-11-26","2018-11-27","2018-11-28","2018-11-29","2018-11-30","2018-12-03","2018-12-04","2018-12-05","2018-12-06","2018-12-07","2018-12-10","2018-12-11","2018-12-12","2018-12-13","2018-12-14","2018-12-17","2018-12-18","2018-12-19","2018-12-20","2018-12-21","2018-12-24","2018-12-25","2018-12-26","2018-12-27","2018-12-28","2018-12-31","2019-01-01","2019-01-02","2019-01-03","2019-01-04","2019-01-07","2019-01-08","2019-01-09","2019-01-10","2019-01-11","2019-01-14","2019-01-15","2019-01-16","2019-01-17","2019-01-18","2019-01-21","2019-01-22","2019-01-23","2019-01-24","2019-01-25","2019-01-28","2019-01-29","2019-01-30","2019-01-31","2019-02-01","2019-02-04","2019-02-05","2019-02-06","2019-02-07","2019-02-08","2019-02-11","2019-02-12","2019-02-13","2019-02-14","2019-02-15","2019-02-18","2019-02-19","2019-02-20","2019-02-21","2019-02-22","2019-02-25","2019-02-26","2019-02-27","2019-02-28","2019-03-01","2019-03-04","2019-03-05","2019-03-06","2019-03-07","2019-03-08","2019-03-11","2019-03-12","2019-03-13","2019-03-14","2019-03-15","2019-03-18","2019-03-19","2019-03-20","2019-03-21","2019-03-22","2019-03-25","2019-03-26","2019-03-27","2019-03-28","2019-03-29","2019-04-01","2019-04-02","2019-04-03","2019-04-04","2019-04-05","2019-04-08","2019-04-09","2019-04-10","2019-04-11","2019-04-12","2019-04-15","2019-04-16","2019-04-17","2019-04-18","2019-04-19","2019-04-22","2019-04-23","2019-04-24","2019-04-25","2019-04-26","2019-04-29","2019-04-30","2019-05-01","2019-05-02","2019-05-03","2019-05-06","2019-05-07","2019-05-08","2019-05-09","2019-05-10","2019-05-13","2019-05-14","2019-05-15","2019-05-16","2019-05-17","2019-05-20","2019-05-21","2019-05-22","2019-05-23","2019-05-24","2019-05-27","2019-05-28","2019-05-29","2019-05-30","2019-05-31","2019-06-03","2019-06-04","2019-06-05","2019-06-06","2019-06-07","2019-06-10","2019-06-11","2019-06-12","2019-06-13","2019-06-14","2019-06-17","2019-06-18","2019-06-19","2019-06-20","2019-06-21","2019-06-24","2019-06-25","2019-06-26","2019-06-27","2019-06-28","2019-07-01","2019-07-02","2019-07-03","2019-07-04","2019-07-05","2019-07-08","2019-07-09","2019-07-10","2019-07-11","2019-07-12","2019-07-15","2019-07-16","2019-07-17","2019-07-18","2019-07-19","2019-07-22","2019-07-23","2019-07-24","2019-07-25","2019-07-26","2019-07-29","2019-07-30","2019-07-31","2019-08-01","2019-08-02","2019-08-05","2019-08-06","2019-08-07","2019-08-08","2019-08-09","2019-08-12","2019-08-13","2019-08-14","2019-08-15","2019-08-16","2019-08-19","2019-08-20","2019-08-21","2019-08-22","2019-08-23","2019-08-26","2019-08-27","2019-08-28","2019-08-29","2019-08-30","2019-09-02","2019-09-03","2019-09-04","2019-09-05","2019-09-06","2019-09-09","2019-09-10","2019-09-11","2019-09-12","2019-09-13","2019-09-16","2019-09-17","2019-09-18","2019-09-19","2019-09-20","2019-09-23","2019-09-24","2019-09-25","2019-09-26","2019-09-27","2019-09-30","2019-10-01","2019-10-02","2019-10-03","2019-10-04","2019-10-07","2019-10-08","2019-10-09","2019-10-10","2019-10-11","2019-10-14","2019-10-15","2019-10-16","2019-10-17","2019-10-18","2019-10-21","2019-10-22","2019-10-23","2019-10-24","2019-10-25","2019-10-28","2019-10-29","2019-10-30","2019-10-31","2019-11-01","2019-11-04","2019-11-05","2019-11-06","2019-11-07","2019-11-08","2019-11-11","2019-11-12","2019-11-13","2019-11-14","2019-11-15","2019-11-18","2019-11-19","2019-11-20","2019-11-21","2019-11-22","2019-11-25","2019-11-26","2019-11-27","2019-11-28","2019-11-29","2019-12-02","2019-12-03","2019-12-04","2019-12-05","2019-12-06","2019-12-09","2019-12-10","2019-12-11","2019-12-12","2019-12-13","2019-12-16","2019-12-17","2019-12-18","2019-12-19","2019-12-20","2019-12-23","2019-12-24","2019-12-25","2019-12-26","2019-12-27","2019-12-30","2019-12-31"],["Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue","Wed","Thu","Fri","Mon","Tue"],[0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0],[20797,26040,27551,28444,26191,31350,33228,33744,33309,31736,33591,34645,34456,33646,32434,33874,35666,35679,35302,32608,34079,35571,35993,34699,33052,10924,35025,36525,35753,34357,35173,35847,36576,35664,34169,35277,36950,36942,36345,33846,34688,36891,36261,35692,32606,35195,36779,35641,33449,33183,33688,34334,28582,32376,33242,11365,34881,36747,36647,33557,34769,37135,37034,36267,34293,37210,36836,32116,33904,29195,28879,26770,11123,9335,27550,26681,34015,33950,32492,33883,36281,36835,36501,33813,11434,33159,36097,30627,30630,31890,36802,29392,31734,33598,34888,37619,37721,35301,34194,32250,36903,36240,31036,34581,33724,37808,34906,34568,33913,35108,34525,33744,36083,34284,35708,33639,31464,36253,34833,34772,36897,36517,36622,34939,30702,31125,28181,30645,31596,30379,32810,32436,34436,31542,27667,27832,31779,33591,32022,32846,32867,33616,32550,28957,25810,26777,32477,30218,31308,32982,34483,34516,30522,31409,33593,35547,32018,23522,30929,32458,35997,36112,30809,29459,34354,36485,36792,36366,31382,26867,28761,25375,30416,29008,32304,32397,32669,34468,28102,34911,36356,36339,35135,27289,33940,21217,17295,21128,22761,23950,27746,28657,28909,27218,31091,32402,31969,32118,31116,32416,34349,33947,32949,32222,32305,35145,34586,32337,32079,33112,34677,33714,33599,31702,31673,31114,32195,19264,27926,33214,34935,34646,34353,32391,32848,34462,34733,34700,32893,11329,33509,33855,33087,31152,31921,33243,33019,32328,29786,31429,33649,32758,32433,30005,27804,25834,30164,29914,28177,27511,28657,28454,25870,22744,3377,16150,17244,16982,14961,3402,18538,22255,23565,23091,28537,30166,30224,30172,28551,28691,27938,28218,28947,27935,29684,29967,24250,28643,27135,25194,27121,28803,29218,28189,9933,30589,31528,29635,25669,30808,32317,32495,29954,24010,31266,33876,33050,32332,31196,31143,33354,33938,33227,31394,32204,33830,31716,32991,29185,30144,33264,30668,30865,30856,11331,31780,31793,32453,31040,27857,28448,26395,12046,8819,28373,29935,28133,28328,26389,32102,32165,31493,31002,31227,32161,33705,33469,32538,31073,30784,32301,32313,31148,30039,25590,12546,31772,31729,28257,31253,24878,32871,26150,30299,31633,33282,33097,32890,30710,30259,30990,33107,33354,30176,32108,33967,32770,32255,29529,32158,33460,33485,33392,29399,29570,24750,20774,16200,21223,20330,30882,31523,29408,28712,27147,25400,29530,28039,28941,26289,28164,30668,30983,28447,25013,26268,27502,29465,24077,28553,29142,29303,29774,25127,28090,29877,29280,26340,26767,28692,28374,30702,30291,27584,25046,26784,29877,28407,26635,23505,30860,24471,28604,26618,28392,30175,29710,29448,28222,26185,26723,30372,27644,28503,30642,32398,31217,29639,30461,31196,28249,27647,25000,28870,26520,31154,27906,31263,30230,30433,30197,28712,30234,28472,30530,32345,31407,27765,28881,30459,31471,27046,29965,29482,30852,29985,30331,30640,27582,30092,31765,31467,31496,28286,27320,30957,27387,19573,8176,28764,31331,30934,30712,29507,29025,30209,15398,29207,28656,10735,29542,30559,29783,28856,29449,30308,29077,27934,27266,29474,28543,29768,29207,27164,28123,28708,24724,27736,26169,25831,26760,25585,23710,21393,9182,3258,14973,15815,14977,8796,3754,17252,19927,20149,25996,27710,28372,29572,27774,28746,29687,30089,29077,28047,28815,30199,29508,26702,27718,29123,30438,29875,29627,27593,9800,29748,30516,30315,29268,30007,30948,27016,30638,29950,30746,32356,31943,31487,30348,28366,32623,32420,32139,29889,26394,28921,31622,31490,31530,31588,31098,32427,32199,29926,10388,30192,32133,31029,29687,30774,32346,32576,31992,30392,31542,33571,32716,31022,30425,29940,32129,32545,32220,30409,26882,27199,24950,10941,8446,26482,30126,30168,29736,21801,28906,30306,12121,29602,28499,30472,32105,31813,30842,23844,30011,30268,26757,23509,24287,29722,29757,31080,30674,28157,30381,32255,31994,31743,28611,31478,30536,26887,23783,24479,30308,32536,32446,27449,28716,30092,29680,31943,29387,28869,23363,29280,29677,29147,28094,27540,27508,30354,27725,28884,22559,30390,26654,27501,25231,27899,29159,29798,23946,25177,28012,26020,28377,18169,19847,27295,29622,28364,29370,27295,24023,28879,26972,30270,26657,27702,30279,30118,30218,29198,29267,31164,30737,27990,27442,29784,31587,32061,30887,29375,30913,31654,31061,30485,29321,29891,26991,29363,30047,26250,6549,26714,26238,25379,25841,30155,25461,25232,30404,29399,26871,27790,29985,29816,28077,30681,30185,28379,30870,26932,29828,32140,28739,18562,28089,27797,29863,30251,25208,25864,26772,30402,24836,27383,23147,28862,26752,30503,30308,29218,28337,30553,29852,29445,27679,9834,28800,30622,29984,28518,29245,30497,30825,29858,28711,28302,30096,29805,29546,27666,28346,30453,28883,24522,26383,26817,27383,24767,24632,23004,17405,10507,3475,14915,15194,14671,9760]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>fecha_retiro<\/th>\n      <th>day_of_week<\/th>\n      <th>is_friday<\/th>\n      <th>Trips<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":7,"searching":false,"initComplete":"function(settings, json) {\n$(this.api().table().container()).css({'font-size': '12px'});\n}","columnDefs":[{"className":"dt-right","targets":[2,3]},{"name":"fecha_retiro","targets":0},{"name":"day_of_week","targets":1},{"name":"is_friday","targets":2},{"name":"Trips","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[7,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":["options.initComplete"],"jsHooks":[]}</script>
]
.pull-right[
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-19-1.png" width="80%" /&gt;
]


---

- By how much trips change when I move from 0 (Not-friday) to 1 (Friday)? 
- x changes by 1, y changes by `\(\beta\)`

```
## 
## Call:
## lm(formula = Trips ~ is_friday, data = Data_BP)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -26152.2  -1287.2    868.8   3016.8   8397.8 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  29410.2      221.2 132.929   &lt;2e-16 ***
## is_friday    -1200.6      495.0  -2.425   0.0155 *  
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 5531 on 779 degrees of freedom
## Multiple R-squared:  0.007495,	Adjusted R-squared:  0.00622 
## F-statistic: 5.882 on 1 and 779 DF,  p-value: 0.01552
```

---
### Regression with a Categorical Outcome

- Suppose instead that `\(y_i\)` takes only two values: 0 or 1.  

--

.blue[Example:]  
Suppose you work at Amazon and want to predict if a customer will return a product based on its rating.  

`$$y_i =
\begin{cases}
1 &amp; \text{if customer returns product \(i\)} \\
0 &amp; \text{if customer keeps product \(i\)}
\end{cases}$$`

We run the regression:

`$$y_i = \beta_0 + \beta_1 x_i + u_i,$$`  
where `\(x_i\)` is the product rating (between 0 and 5).  

---
### Example Data

HEre provide an equivalent example of data like this, but for a made up data set on returns and ratings 
.pull-left[
<div class="datatables html-widget html-fill-item" id="htmlwidget-fd734343ea5f5bd4b345" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-fd734343ea5f5bd4b345">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[[4.944,1.548,4.621,3.305,2.582,2.799,3.826,1.33,2.357,3.723,2.268,4.326,1.861,2.992,2.104,1.768,4.802,2.287,2.914,1.112,3.19,3.577,3.385,2.288,4.564,3.505,2.212,2.553,1.642,4.45,4.812,3.255,2.318,4.986,1.939,3.451,1.433,2.948,1.398,1.645,2.132,3.335,3.927,1.662,4.466,3.834,4.042,1.588,2.432,3.693,3.095,2.399,1.962,1.233,1.946,4.56,4.247,3.99,1.62,1.499,4.899,2.745,2.856,1.661,3.34,2.083,1.92,3.765,2.131,4.242],[0,0,0,1,1,0,0,1,0,0,0,0,1,1,1,1,0,1,0,0,1,0,0,1,0,1,0,0,0,0,0,0,0,0,1,0,1,0,0,1,0,0,1,1,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0,1,1,1,0,0,0,1,1,1,1,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>rating<\/th>\n      <th>returned<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":7,"searching":false,"initComplete":"function(settings, json) {\n$(this.api().table().container()).css({'font-size': '12px'});\n}","columnDefs":[{"className":"dt-right","targets":[0,1]},{"name":"rating","targets":0},{"name":"returned","targets":1}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[7,10,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":["options.initComplete"],"jsHooks":[]}</script>
]
.pull-right[
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-22-1.png" width="80%" /&gt;
]

---
#### Interpretation

- In a regression, we predict the **expected value** of `\(y\)` for a given `\(x\)`:  

  `$$E(y|x) = \beta_0 + \beta_1 x$$`

- The expected value of a variable is just its **mean**.  
  - For a binary variable, the mean is simply the proportion of 1s.  

- Therefore, `\(E(y|x)\)` is the **proportion of returns** among products with rating `\(x\)`.  

- Hence, the regression prediction is the **probability of return**.  

- If `\(\hat{y}=0.15\)` for a 5-star product, we interpret it as a 30% chance of being returned  

- The slope `\(\beta_1\)` tells us how the probability changes when rating increases by one point:  
  - If the probability of return is 27% at 4 stars and 30% at 5 stars, then  
  `$$\beta_1 = 0.15 - 0.27 = -0.12$$` 
  
    meaning each additional point reduces the probability of return by 12p.p

---


```
## 
## Call:
## lm(formula = returned ~ rating, data = amazon_data)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -0.6130 -0.3918 -0.1921  0.4904  0.8633 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  0.75285    0.15932   4.725  1.2e-05 ***
## rating      -0.12578    0.05103  -2.465   0.0162 *  
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.4732 on 68 degrees of freedom
## Multiple R-squared:  0.08202,	Adjusted R-squared:  0.06852 
## F-statistic: 6.076 on 1 and 68 DF,  p-value: 0.01624
```


- What is the probability of return  when rating is 3?
---

### Interpretation
- `\(\beta_1\)` describes change in probability of `\(y=1\)` when x changes by 1

### Limitations
- OLS can predict values **outside [0,1]**, which doesn’t make sense for probabilities.  
- That’s why in practice we often move to **Logit/Probit models** — non linear models
- But OLS is still a useful for simplicity and interpretation. 


---

layout: false
class: inverse, middle

# Statistical Properties of OLS

---
### Uncertainty in the Estimate

We only have samples, and yet we want to learn something about the population parameters

.pull-left[
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-24-1.png" width="100%" /&gt;
]

.pull-right[

.center[
** Population Regression**
]

$$ y_i = 6.22 + 2.95x_i +u_i$$
]

---
### Uncertainty in the Estimate

.pull-left[
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-26-1.png" width="100%" /&gt;
]

.pull-right[

.center[
**Population Regression**
]
$$ y_i = 6.22 + 2.95x_i +u_i$$

.center[
**Sample Estimate**
]
$$ \hat{y_i} = 1.75 + 3.13x_i $$
]
---

### Uncertainty in the Estimate

.pull-left[
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-29-1.png" width="100%" /&gt;
]

.pull-right[

.center[
**Population Regression**
]
$$ y_i = 6.22 + 2.95x_i +u_i$$

.center[
**Sample Estimate**
]
$$ \hat{y_i} = 1.76 + 2.73x_i $$
]

---

### Uncertainty in the Estimate

.pull-left[
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-32-1.png" width="100%" /&gt;
]

.pull-right[

.center[
**Population Regression**
]
$$ y_i = 6.22 + 2.95x_i +u_i$$

.center[
**Sample Estimate**
]
$$ \hat{y_i} = 1.7 + 2.82x_i $$
]

---

### Uncertainty in the Estimate

.pull-left[
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-35-1.png" width="100%" /&gt;
]

.pull-right[

.center[
**Population Regression**
]
$$ y_i = 6.22 + 2.95x_i +u_i$$

.center[
**Sample Estimate**
]
$$ \hat{y_i} = 1.15 + 3.36x_i $$
]

---

### Uncertainty in the Estimate

.pull-left[
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-38-1.png" width="100%" /&gt;
]

.pull-right[

.center[
**Population Regression**
]
$$ y_i = 6.22 + 2.95x_i +u_i$$

.center[
**Sample Estimate**
]
$$ \hat{y_i} = 1.89 + 3.23x_i $$
]


---
### Uncertainty in the Estimate

- `\(\hat{\beta}_0\)` and `\(\hat{\beta}_1\)` are estimators

--

- And they are random variables
  - Because their values depend on the random samples

--
- Are they good estimators?

--
  - Are they unbiased?

--
  - Do they have small variance?
  
---
### Uncertainty in the Estimate

Under these assumptions: 


0. Relationship is linear in parameters with linear disturbance
1. `\(E(u_i)=0\)`
2. `\(Var(u_i)=\sigma^2\)`
3. `\(cov(u_i,u_j)=0\)`


- OLS is unbiased

`$$E(\hat{\beta}_1)=E\left(\frac{\sum_i(x_i-\bar{x})(y_i-\bar{y})}{\sum_i(x_i-\bar{x})^2}\right)=\beta_1 \qquad and \qquad E(\hat{\beta}_0)=\beta_0$$`

--

- Assumption 1 is enough for being unbiased `\(E(u_i)=0\)`

---
### Uncertainty in the Estimate

- What is the variance of `\(\hat{\beta}_1\)` and `\(\hat{\beta}_0\)`?

`$$\begin{align*}
\text{Var}(\hat{\beta}_1) &amp;= \text{Var}\left(\frac{\sum_i(x_i-\bar{x})(y_i-\bar{y})}{\sum_i(x_i-\bar{x})^2}\right) \\
&amp;= \text{Var}\left(\sum_i\frac{(x_i-\bar{x})y_i}{\sum_i(x_i-\bar{x})^2}\right) = \sum_i\left(\frac{(x_i-\bar{x})}{\sum_i(x_i-\bar{x})^2}\right)^2\text{Var}(y_i) \\
&amp;= \frac{\sigma^2}{\sum_i(x_i-\bar{x})^2}=\frac{\sigma^2}{S_{xx}}
\end{align*}$$`
Because `\(x_i\)` don't change: `\(var(y_i)=var(\beta_0+\beta_1x_i+u_i)=var(u_i)=\sigma^2\)`

--

And:

`$$\begin{align*}
\text{Var}(\hat{\beta}_0) &amp; =\text{Var}(\bar{y}-\hat{\beta}_1\bar{x})=\text{Var}(\bar{y})+\bar{x}^2\text{Var}(\hat{\beta}_1)-2\bar{x}\underbrace{cov(\bar{y},\hat{\beta}_1)}_{0} \\
&amp;=\frac{\sigma^2}{n}+\bar{x}^2\frac{\sigma^2}{S_{xx}}=\sigma^2({\frac{1}{n}+\frac{\bar{x}^2}{S_{xx}}})
\end{align*}$$`

Standard error is standard deviation of the estimator: `\(SE(\hat{\beta})=\sqrt{Var(\hat{\beta})}\)`


---
### Uncertainty in the Estimate

- How to estimate the `\(\sigma^2\)`?


`$$\hat{\sigma}^2=\frac{\sum_i e_i^2}{n-2}$$`
--

- Is unbiased for `\(\sigma^2\)`: 

`$$E(\hat{\sigma}^2)=E\left(\frac{\sum_i e_i^2}{n-2}\right)=\sigma^2$$`

---
### Regression Output

```
## 
## Call:
## lm(formula = Trips ~ TMP, data = Data_BP)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -24010.5  -1508.4    774.5   2920.5   8900.2 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 16892.66    1427.32  11.835   &lt;2e-16 ***
## TMP           723.55      83.37   8.679   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 5302 on 779 degrees of freedom
## Multiple R-squared:  0.08817,	Adjusted R-squared:  0.087 
## F-statistic: 75.32 on 1 and 779 DF,  p-value: &lt; 2.2e-16
```

---
### Problem:

Suppose that instead of measuring `\(TMP\)` in celcius, we measure it in `\(Farenheits\)`
Practically: `\(F=1.8C+32\)`

- How would `\(\beta_1\)` and `\(SE(\hat{\beta_1})\)` change?

---
### Gauss Markov Theorem

Under assumptions 1-4,  among all linear and unbiased estimators, OLS has the smallest variance. 

`$$var(\hat{\beta}_1) \leq var(\hat{\beta}_1') \qquad and \qquad var(\hat{\beta}_0)\leq var(\hat{\beta}_0')$$`

Where `\(\hat{\beta}_1'\)` `\(\hat{\beta}_0'\)` are any linear and unbiased estimators of `\(\beta_1\)` and `\(\beta_0\)` respectively.

--

It's .blue[BLUE] - Best, Linear, Unbiased Estimator

--

**Linear estimator** basically means it's a weighted sum of `\(y_i\)`s:

`$$\hat{\beta}_1'=\sum_i c_iy_i$$` where `\(c_i\)` are some weights, usually function of `\(x_i\)`

**In OLS:**

`$$\hat{\beta}_1=\frac{\sum_i(x_i-\bar{x})(y_i-\bar{y})}{\sum_i(x_i-\bar{x})^2}=\frac{\sum_i(x_i-\bar{x})y_i}{\sum_i(x_i-\bar{x})^2} \qquad so \qquad c^{OLS}_i=\frac{(x_i-\bar{x})}{\sum_i(x_i-\bar{x})^2}$$`


---
### UPDATE on Gauss Markov

- Science is in progress
- A new paper in 2022 by Hansen shows linearity is not needed
- OLS, under our assumptions, is BUE (Best Unbiased Estimator)


---

&lt;center&gt;
&lt;img src=Exam_qs_to_paste/Gauss-Markov.png width="800"&gt;
&lt;/center&gt;

---
### Inference

- Until now, we haven't made any assumptions about the **distributions** of the underlying data or `\(\beta\)`

--
  - We don't need it for calculating coefficients `\(\hat\beta_0\)` or `\(\hat\beta_1\)`

--
  - We don't need it for making predictions `\(\hat{y}_i=\hat{\beta}_0+\hat{\beta}_1x_i\)`

--
  - We don't need it to calculate variance or expectation of coefficients

--
  - We don't need it for Gauss-Markov Theorem

--

- However, to make **inference** (confidence intervals, hypothesis testing), we need to know something about distribution of `\(\hat\beta\)`

--
  - We will need to assume that  population errors are normally distributed: `\(u_i \sim N(0,\sigma)\)`
  - For some results this can be relaxed with large samples (CLT)
  
--
  - `\(y_i\)` or `\(x_i\)` does not need to be normally distributed

--
  - But if `\(u_i \sim N(0,\sigma)\)`, then conditional on `\(x_i\)`: `\(y_i|x_i \sim N(\beta_0+\beta_1x_i,\sigma)\)`

---

Suppose I take 1000 samples of size 40 from the population where `\(u_i \sim N(0,2)\)`:

$$ y_i = 6.22 + 2.95x_i +u_i$$

And I estimate the `\(\beta_1\)` and `\(\beta_0\)` for each sample.

&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-43-1.png" width="100%" /&gt;

---
### Distributions

Given that
  - `\(u_i \sim N(0,\sigma)\)`
  - linear combination of normal variables is normal
  
We can derive the following distributions: 

`$$\hat{\beta_1} \sim N\left(\beta_1,\frac{\sigma}{\sqrt{S_{xx}}}\right) \qquad and  \qquad \hat{\beta_0} \sim N\left(\beta_0,\sigma\sqrt{({\frac{1}{n}+\frac{\bar{x}^2}{S_{xx}}}})\right)$$`
--

Furthermore:

`$$\frac{(n-2)\hat{\sigma}^2}{\sigma^2}\sim\chi^2_{n-2}$$`

#### CLT For Regression

- In large samples, we can relax the normality assumption on `\(u_i\)` and use CLT:

`$$\small  \hat{\beta_1} \;\;\overset{d}{\longrightarrow}\;\; N\left(\beta_1,\frac{\sigma}{\sqrt{S_{xx}}}\right)  and  \qquad \hat{\beta_0} \;\;\overset{d}{\longrightarrow}\;\; N\left(\beta_0,\sigma\sqrt{({\frac{1}{n}+\frac{\bar{x}^2}{S_{xx}}}})\right)$$`
---

#### Why does this happen?

- The OLS slope is  a **linear combination of the errors**:

$$\hat{\beta}_1 = \beta_1 + \sum_i \underbrace{\tfrac{(x_i - \bar{x})}{S_{xx}}}_{\text{weight}} u_i $$

- Define each weighted error as `\(Z_i = \tfrac{(x_i - \bar{x})}{S_{xx}} u_i\)`,so that `$$\hat{\beta}_1 - \beta_1 = \sum_i Z_i .$$`

--
- By the **Central Limit Theorem**, the sum of many independent mean-zero variables is approximately normal:

`$$\sum_i Z_i \;\;\overset{d}{\longrightarrow}\;\; N\!\big(0,\; \text{Var}(\sum_i Z_i)\big).$$`

- Since `\(\text{Var}(\sum_i Z_i) =\sum_i var(Z_i)= \frac{\sum_i(x_i - \bar{x})^2}{S_{xx}^2}\sigma^2=\frac{S_{xx}}{S_{xx}^2}\sigma^2=\frac{\sigma^2}{S_{xx}^2}\)`, we get

`$$\hat{\beta}_1 - \beta_1 \;\;\overset{d}{\longrightarrow}\;\; 
N\!\left(0,\; \frac{\sigma^2}{S_{xx}}\right).$$`
---

## Hypothesis Testing

Our **test statistic** for `\(\beta_1\)` and it's distribution under the null hypothesis: `\(H_0: \beta_1=b_1\)`

`$$T=\frac{\hat{\beta_1}-b_1}{SE(\hat{\beta_1})}=\frac{\hat{\beta_1}-b_1}{\frac{ \hat \sigma}{\sqrt{S_{xx}}}} \sim t_{n-2}$$`


Similarly, for  `\(\beta_0\)` the null hypothesis: `\(H_0: \beta_0=b_0\)`

`$$T=\frac{\hat{\beta_0}-b_0}{SE(\hat{\beta_0})}=\frac{\hat{\beta_0}-b_0}{\hat \sigma\sqrt{({\frac{1}{n}+\frac{\bar{x}^2}{S_{xx}}})}} \sim t_{n-2}$$`

With that, we can use usual hypothesis testing procedures


---
**Example:**

Does temperature predicts bike rides? Let's test it at `\(\alpha=0.05\)`

`\(H_0: \beta_1=0\)`
`\(H_A: \beta_1\neq0\)`


`$$T_{test}=\frac{\hat{\beta_1}-0}{SE(\hat{\beta_1})}=\frac{723.55}{83.37}=8.679$$`

We can compare it to critical value (n=781):
`$$t_{779,\frac{\alpha}{2}} \approx z_{\frac{\alpha}{2}} =1.96&lt;8.679=T_{test}$$`

We confidently reject the the null that the temperature does not predict bike rides.


---

### P-Value


Alternatively, calculate **p-value**:  the probability of seeing our test statistic or a more extreme test statistic if the null hypothesis were true.

In regressions we usually use two-sided tests. Hence the p-value is:

`$$p-value=2*P(t_{n-2,\frac{\alpha}{2}}&gt;T_{test})$$`

Small p-values  mean that it would be unlikely to see our results if the null hypothesis were really true.

.center[
&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-44-1.png" width="100%" /&gt;
]
---
### Regression Output

```
## 
## Call:
## lm(formula = Trips ~ TMP, data = Data_BP)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -24010.5  -1508.4    774.5   2920.5   8900.2 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 16892.66    1427.32  11.835   &lt;2e-16 ***
## TMP           723.55      83.37   8.679   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 5302 on 779 degrees of freedom
## Multiple R-squared:  0.08817,	Adjusted R-squared:  0.087 
## F-statistic: 75.32 on 1 and 779 DF,  p-value: &lt; 2.2e-16
```


---
### Confidence Intervals

Using the distributions, we can figure out confidence intervals for our estimates:

`$$P(-t_{n-2,\frac{\alpha}{2}}&lt;\frac{\hat{\beta}_1-\beta}{SE(\hat{\beta}_1)}&lt;t_{n-2,\frac{\alpha}{2}})=1-\alpha$$`

`$$CI_{\beta_1}=\left(\hat{\beta}_1-t_{n-2,\frac{\alpha}{2}}\underbrace{\frac{\hat \sigma}{\sqrt{S_{xx}}}}_{SE(\hat{\beta}_1)},\hat{\beta}_1+t_{n-2,\frac{\alpha}{2}}\underbrace{\frac{\hat \sigma}{\sqrt{S_{xx}}}}_{SE(\hat{\beta}_1)}\right)$$`

And Similarly for `\(\beta_0\)`

`$$CI_{\beta_0}=\left(\hat{\beta}_0-t_{n-2,\frac{\alpha}{2}}\underbrace{\hat \sigma\sqrt{({\frac{1}{n}+\frac{\bar{x}^2}{S_{xx}}})}}_{SE(\hat{\beta}_0)},\hat{\beta}_0+t_{n-2,\frac{\alpha}{2}}\underbrace{\hat \sigma\sqrt{({\frac{1}{n}+\frac{\bar{x}^2}{S_{xx}}})}}_{SE(\hat{\beta}_0)}\right)$$`

---
### Confidence Intervals

What's the confidence 95% interval for the effect on temperature?

--

`$$CI_{\beta_1}=\left(723.55-1.96*83.37,723.55+1.96*83.37\right)$$`
`$$CI_{\beta_1}=\left(560.87,886.23\right)$$`


---
#### Confidence Intervals
Suppose we instead want to estimate the impact of pollution (PM10) on bike trips.


```
## 
## Call:
## lm(formula = Trips ~ PM10, data = Data_BP)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -27079.4  -1298.2    947.1   3155.8   8938.6 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 28382.98     576.49  49.235   &lt;2e-16 ***
## PM10           16.99      11.68   1.455    0.146    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 5544 on 779 degrees of freedom
## Multiple R-squared:  0.002709,	Adjusted R-squared:  0.001429 
## F-statistic: 2.116 on 1 and 779 DF,  p-value: 0.1462
```

- Can we reject null of no impact at 10%?
- What's the 90% confidence interval?


---
### Confidence Intervals

**Average response**:
What would be average number of rides on days with temperature of 30C?
$$ (\bar{y}|x=x_0)=\hat{\beta_0}+\hat{\beta_1}x $$
--
What's the expectation?

`$$E(\bar{y}|x=x_0)=E(\hat{\beta_0}+\hat{\beta_1}x_0)=\beta_0+\beta_1x_0$$`
--

What's the variance?
`$$var(\bar{y}|x=x_0)=Var(\hat{\beta_0}+\hat{\beta_1}x_0)=\sigma^2({\frac{1}{n}+\frac{(x_0-\bar{x})^2}{S_{xx}}})$$`

--
What's the distribution:

`$$(\bar{y}|x=x_0)\sim N\left(\beta_0+\beta_1x_0, \sigma\sqrt{({\frac{1}{n}+\frac{(x_0-\bar{x})^2}{S_{xx}}})}\right)$$`

---
### Confidence Intervals

We can build the confidence intervals as before:

`$$CI_{(\bar{y}|x=x_0)}=\hat{\beta_0}+\hat{\beta_1}x_0 \pm t_{n-2,\frac{\alpha}{2}}\underbrace{\hat \sigma\sqrt{({\frac{1}{n}+\frac{(x_0-\bar{x})^2}{S_{xx}}})}}_{SE}$$`


---
### Confidence Intervals

What would be 95% CI for average number of rides if temperature is 30C?

- `\(\small \hat{\beta_0}=16892.66\)` and  `\(\small \hat{\beta_1}=723.55\)`
- n=781
- `\(\small \bar{x}=16.96\)`
- `\(\small S_{xx}=4044\)`
- `\(\small \sum_ie^2=21895427100\)`

--

- `\(\small \hat{\sigma}=\sqrt{\frac{\sum_ie^2}{n-2}}=5301.613\)`

--

`$$\small CI_{(\bar{y}|x=x_0)}=16892.66+723.55*30 \pm 1.96* \underbrace{5301.613\sqrt{({\frac{1}{781}+\frac{(30-16.96)^2}{4044}})}}_{SE}$$`
`$$\small CI_{(\bar{y}|x=x_0)}=38599.16 \pm 2161.588$$`


--

- Interpretation?

--
  - If we take a lot of samples, and calculate confidence interval using data from each, 95% of them would contain the true value
  - We are 95% confident, true value is in the interval
  

---
### Confidence Intervals

**R code**


``` r
lm_model &lt;- lm(Trips ~ TMP, data = Data_BP)
new_data&lt;- data.frame(TMP= c(30))
predict(lm_model, newdata = new_data, interval = "confidence", level = 0.95, se.fit=TRUE)
```

```
## $fit
##        fit      lwr      upr
## 1 38599.23 36434.32 40764.14
## 
## $se.fit
## [1] 1102.851
## 
## $df
## [1] 779
## 
## $residual.scale
## [1] 5301.613
```

---
### Mean response vs New response

- Suppose you are checking how people react to a new drug for balding. You estimated the following regressions:

`$$\text{Number of hairs/}cm^2=\hat{\beta}_0+\hat{\beta}_1\text{Amount of drug in mg}$$`
- For now, you were only giving doses between 1-25mg. You want to increase dosage to 30mg.
- You can have two types of confidence intervals



---

- For **Mean Response**
  - Suppose you give 30mg to many, many people, and you are interested in average `\(\text{Number of hairs/}cm^2\)`  among those who got 30mg
  - Since you average among many people, the `\(u_i\)` individual error terms does not play a role ( `\(E(u_i)=0\)` )
  - The uncertainty comes from whether you did a good job estimating `\(\beta\)`s

--

- For **New Response**
  - Suppose you give 30mg to one person, and you are interested in their outcome. 
  - Since there is only one person, `\(u_i\)` will play a role
    - Maybe you picked someone who naturally has a lot of hair, or who will be on other medication which makes him lose hair
    - Those factors avarage out in mean response, so don't play a role
  - There will be more uncertainty about this new response, hence wider CI
  - In particular, `\(var(\text{new response})=var(\text{mean response})+var(u_i)\)`
  - For this we need to make an assumption that errors are normal, CLT is not enough!
    - Because it's not only about the distribution of `\(\beta\)` but also error term

---
### Confidence Intervals

**New response**:
What would be the number of rides on some day with temperature 30C?
$$ \hat{y}=\hat{\beta_0}+\hat{\beta_1}x$$
--

What's the expectation?

`$$E(\hat{y}|x=x_0)=E(\hat{\beta_0}+\hat{\beta_1}x_0)=\beta_0+\beta_1x_0$$`
--

How much true value varies around this prediction?
`$$var(y_0-\hat{y}|x=x_0)=Var(\hat{\beta_0}+\hat{\beta_1}x_0)+Var(u_i)=\sigma^2(1+{\frac{1}{n}+\frac{(x_0-\bar{x})^2}{S_{xx}}})$$`

--
What's the distribution:

`$$(\bar{y}|x=x_0)\sim N\left(\beta_0+\beta_1x_0, \sigma\sqrt{(1+ {\frac{1}{n}+\frac{(x_0-\bar{x})^2}{S_{xx}}})}\right)$$`

---
### Confidence Intervals

We can build the confidence intervals as before:

`$$CI_{(\bar{y}|x=x_0)}=\hat{\beta_0}+\hat{\beta_1}x_0 \pm t_{n-2,\frac{\alpha}{2}}\underbrace{\hat \sigma\sqrt{(1+{\frac{1}{n}+\frac{(x_0-\bar{x})^2}{S_{xx}}})}}_{SE}$$`

---

&lt;img src="C_4_slides_a_files/figure-html/unnamed-chunk-48-1.png" width="100%" /&gt;

---
### Confidence Intervals

What would be 95% CI for number of rides on some day with 30C?

**R code**


``` r
lm_model &lt;- lm(Trips ~ TMP, data = Data_BP)
new_data&lt;- data.frame(TMP= c(30))
predict(lm_model, newdata = new_data, interval = "predict", level = 0.95, se.fit=TRUE)
```

```
## $fit
##        fit     lwr      upr
## 1 38599.23 27969.3 49229.16
## 
## $se.fit
## [1] 1102.851
## 
## $df
## [1] 779
## 
## $residual.scale
## [1] 5301.613
```


---


### Question

Suppose a model where we have employee's salary and their years of education. Predictor variable is education, response variable is salary. We try to establish the relationship between education and salary. 


--
- What type of factors may affect the stochastic error `\(u_i\)`?

--
- Are they correlated with education?

--
- Would the estimator be unbiased? 



    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
  "highlightStyle": "github",
  "countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
